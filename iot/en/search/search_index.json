{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"ble_proxy/gl-s10/","title":"Introduction","text":"<p>GL-S10 is an ESP32-powered BLE to MQTT IoT gateway. It can be used to facilitate communication between your beacons and servers, such as MQTT broker and AWS IoT. GL-S10 also comes with an optional beacon for testing and a tool app for fast and easy deployment.</p> <p>GL-S10 doesn't have a web Admin Panel. It is a BLE-WiFi gateway aimming to provide a simple method conversing Bluetooth Low Energy to WiFi. It supports GAP and GATT, can act as GATT server or GATT client. WiFi is used in STA mode, connect the superior router to access to the network. Also it can connect to network through Ethernet. It has a built-in standard MQTT client which could connect to any standard MQTT server.  Using MQTT, it can forward BLE messages to the cloud and on the other hand forward messages from cloud to the connected BLE device through BLE notify.</p> <p>Please access to learn more.</p> <p>User Manual</p> <p>Firmware Compilation Guide</p> <p>There is a video setup guide of GL-S10.</p>"},{"location":"ble_proxy/gl-s10/examples/","title":"Examples","text":"<p>Coming soon</p>"},{"location":"ble_proxy/gl-s10/firmware_compilation_guide/","title":"GL-S10 Firmware Compilation Guide","text":"<p>This doc is intended to help users set the software building environment and build your own applications for GL-S10.  As an example, we build a simple demo. It  aims to recieve iBeacons from around and then send it to specified MQTT broker through WiFi. Note that WiFi and MQTT setting is written in the source code.</p>"},{"location":"ble_proxy/gl-s10/firmware_compilation_guide/#set-develop-environment","title":"Set Develop Environment","text":"<p>GL-S10 application is base on Espressif esp-idf(v3.3). You can get the detailed steps of building the compile environment by following the link. https://docs.espressif.com/projects/esp-idf/en/v3.3/get-started/index.html#introduction (Attention: Please check the version of IDF before you download it.) After configuring the develop environment, decompress and get into the source code folder <code>ble_ibeacon/</code>. Most code is in the file <code>ibeacon_demo.c</code>.</p>"},{"location":"ble_proxy/gl-s10/firmware_compilation_guide/#modify-source-code","title":"Modify source code","text":"<p>1. Modify WiFi setting</p> <p>Find contents as below in the <code>ibeacon_demo.c</code> and modify the WiFi setting to what you want.</p> <pre><code>wifi_config_t wifi_config = {\n    .sta = {\n        .ssid = \"WIFI SSID\", //\n        .password = \"WIFI password\",\n    },\n};\n</code></pre> <p>2. Modify MQTT setting</p> <p>Similar with WiFi setting. Find and modify the struct <code>esp_mqtt_client_config_t</code> in the <code>ibeacon_demo.c</code>.</p> <pre><code>esp_mqtt_client_config_t mqtt_cfg = {\n    .uri = \"mqtt://192.168.100.174:61613\",//IP:port\n    .usernaem = \"MQTT username\",\n    .password = \"MQTT password\",\n    .event_handle = mqtt_event_handler,\n};\n</code></pre> <p>(If you want to connect to MQTT broker except tcp, change the url prefix.)</p> <pre><code>tcp ---&gt; mqtt://\ntcp-ssl ---&gt; mqtts://\nweb socket ---&gt; ws://\nweb socket secure ---&gt; wss://\n</code></pre>"},{"location":"ble_proxy/gl-s10/firmware_compilation_guide/#compile-and-flash","title":"Compile and Flash","text":"<p>1. Configuration</p> <p>Before compile the application, get into your project folder (here is <code>ble_ibeacon/</code>), using command <code>make menuconfig</code> to configure some basic setting like serial port. In the configuration inteface, you just need to change three point as follow. Firstly, click <code>Serial flasher config</code>.</p> <p></p> <p>Then modify the three point marked by red line.</p> <p></p> <p>Set <code>Default serial port</code> to the port name show in your PC, typically is <code>/dev/ttyUSB0</code>. Set <code>Serial flasher config ---&gt;Flash SPI speed</code> to <code>80MHz</code>. Set <code>Serial flasher config ---&gt;Flash size</code> to <code>4MB</code>.</p> <p>2. Build</p> <p>In your project folder, using command <code>make all</code>. It will compile and build the firmware. When finished sucessfully, it will show information like this.</p> <p></p> <p>3. Flash</p> <p>GL-S10 using UART to flash the firmware, and also using this UART to output the system log. Connect the UART in S10 to the PC by a USB-UART converter. The PC will find a new usb device like <code>/dev/ttyUSB0</code>. It is the name you should write in the <code>Default serial port</code>.   </p> <p></p> <p>After connect S10 UART to the PC, using command <code>make flash</code> or <code>make flash monitor</code> to flash the firmware. When shows like that, it means the PC is waiting S10 to get into \"download mode\".</p> <p></p> <p>How to get into \"download mode\", do in this way. Unplug the S10 power, press the flash button(do not release) and then plug in the power. When it shows like that,</p> <p></p> <p>means flash starts sucessfully, then you can release the flash button and wait for the flash finished. When flash has been finished, restart the GL-S10.</p>"},{"location":"ble_proxy/gl-s10/firmware_compilation_guide/#result","title":"Result","text":"<p>If you have connect the S10 UART to the PC, using command <code>make monitor</code>, it will print all the system log like that. (here shows the iBeacon data it recieved)</p> <p></p> <p>In the MQTT broker, You can get the messages published by S10 like that.</p> <p></p>"},{"location":"ble_proxy/gl-s10/hardware/","title":"Hardware info","text":""},{"location":"ble_proxy/gl-s10/hardware/#specification","title":"Specification","text":"<p>GL-s10 specification</p>"},{"location":"ble_proxy/gl-s10/hardware/#gpio-list","title":"GPIO list","text":"ESP32-WROOM-32U GPIO Labeling SIGNAL FUNCTION GPIO0 GPIO0 download button control, default to high, when starting, low to enter download mode GPIO1 UART_TX0 used for debugging serial port output GPIO2 TP3 reserve JTAG testing points GPIO3 UART_RX0 used for debugging serial port input GPIO4 GPIO4 NC GPIO5 PHY_RESET MAC phy reset control GPIO6 PSRAM_CLK psram clock signal GPIO7 PSRAM SDO/SD0 psram data signal SDO/SD0 GPIO8 PSRAM SDI/SD1 psram data signal SDI/SD1 GPIO9 PSRAM SHD/SD2 psram data signal SHD/SD2 GPIO10 PSRAM SWP/SD3 psram data signal SWP/SD3 GPIO11 GPIO11 NC GPIO12 BT LED ble led control, pull down to light up GPIO13 I2C_CLK I2C clock signal GPIO14 POWER_LED power led control GPIO15 I2C_DATA I2C data signal GPIO16 PSRAM_CE psram control signal GPIO17 PHY_CLK phy chip clock signal GPIO18 MDIO phy chip control signal MDIO GPIO19 RMII_TXD0 RMII interface TX data TXD0 GPIO21 RMII_TXEN RMII interface TX enable TXEN GPIO22 RMII_TXD1 RMII interface TX data TXD1 GPIO23 MDC phy chip control signal MDC GPIO25 RMII_RXD0 RMII interface RX data RXD0 GPIO26 RMII_RXD1 RMII interface RX data RXD1 GPIO27 RMII_CS_DV RMII interface collision detection signal CS_DV GPIO32 NETWORK LED network led control GPIO33 BUTTON button input GPIO34 GPIO34 NC GPIO35 GPIO35 NC GPIO36 GPIO36 NC GPIO39 GPIO39 NC"},{"location":"ble_proxy/gl-s10/hardware/#pcb-pinout","title":"PCB Pinout","text":""},{"location":"ble_proxy/gl-s10/software/","title":"Software","text":"<p>Coming soon</p>"},{"location":"ble_proxy/gl-s10/tools/","title":"Tools","text":"<p>Coming soon</p>"},{"location":"ble_proxy/gl-s10/user_manual/","title":"GL-S10 User Manual","text":"Version Date Commit V2.0.0 2021-10-25 -"},{"location":"ble_proxy/gl-s10/user_manual/#general-product-introduction","title":"General Product Introduction","text":""},{"location":"ble_proxy/gl-s10/user_manual/#product-introduction","title":"Product introduction","text":"<p>The GL-S10 is an IoT gateway device that supports BLE and Wi-Fi, providing a cost-effective solution for transmitting BLE broadcast data to the cloud. BLE supports GAP and GATT certification and can be used as either Master or Slave to connect and communicate with other BLE devices. GL-S10 can use Wi-Fi as a Station to connect to a parent route or can connect to the Internet through a WAN port. It has a built-in standard MQTT Client that can connect to any standard MQTT Servers to forward incoming BLE messages to the cloud server. </p> <p>The GL-S10 is ideally deployed in warehouses, shopping malls, airports, exhibition halls, tourist attractions and other scenarios for personnel management, asset management, environmental monitoring, indoor navigation, etc. </p>"},{"location":"ble_proxy/gl-s10/user_manual/#product-feature","title":"Product feature","text":"<ul> <li> <p>Runs on Dual-core Xtensa\u00ae 32-bit LX6 microprocessor, supports BLE, Wi-Fi, and Ethernet </p> </li> <li> <p>BLE supports BLE 4.2 Certification </p> </li> <li> <p>BLE communication distance is measured up to 80m (in an open and non-interference environment) </p> </li> <li> <p>Supports multiple encryption methods </p> </li> <li> <p>Supports upgrading firmware via OTA and local serial port </p> </li> <li> <p>Supports MQTT and integrating to multiple server platforms </p> </li> <li> <p>Includes application for configuration with customized connection to Wi-Fi and MQTT servers </p> </li> <li> <p>Supports 802.3at/af standard POE input power </p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#technical-specification","title":"Technical specification","text":"Project Description CPU ESP32-DOWD  Dual-core Xtensa \u00ae 32-bit LX6 microprocessor Nor-Flash 4MB RAM SRAM 520KB + PSRAM 8MB BLE Supports BLE 4.2 Certification  Coverage of 80m (in an open and non-interference environment)  Receiving sensitivity - 97dBm WiFi 802.11b/g/n  Coverage of 80m (in an open and non-interference environment).  Transmitting power 11n: 13dBm; 11b: 18.5dBm  Speed 150Mbps WAN 1 Megabit Ethernet port Button 1 Reset button  Configuration mode, Resetting and OTA upgrading can be accessed by pressing the button LED 3 LED lights:  Power, BLE and Network Indicator Lights Power Supply Supports 1x Micro USB, 5V/1A input  Supports 802.3at/af standard POE input power  Note: Charging with both methods simultaneously may cause damage to the device. Power Consumption Normal operations: &lt; 0.5W  Operating at full capacity: &lt; 1.5W Shell Size 57 * 57 * 25mm(L * M * H) Shell Material ABS Antenna Type External antenna Working Temperature 0~40\u00b0C Storage Temperature -20~70\u00b0C Working humidity 5% ~ 90%, no condensation Storage humidity 5% ~ 95%, no condensation"},{"location":"ble_proxy/gl-s10/user_manual/#package-list","title":"Package list","text":"Project Quantity GL-S10 Gateway 1 BLE Beacon (optional accessory) 1 External Antenna 1 USB Power Cord 1 User Manual 1"},{"location":"ble_proxy/gl-s10/user_manual/#device-and-app-installation","title":"Device and APP Installation","text":""},{"location":"ble_proxy/gl-s10/user_manual/#device-installation","title":"Device installation","text":"<p>Take out the product from its package and attach the external antenna as shown below.   Figure 1</p> <p>Note: </p> <ul> <li> <p>Avoid plugging in the PoE power supply and 5V power supply simultaneously, it may cause damage to the device.  </p> </li> <li> <p>Do not connect to any power supply (including PoE &amp; 5V) before installing the antenna. </p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#button-function-list","title":"Button function list","text":"Pairing mode Reset to factory setting OTA upgrade When it is not connected to any power supply, press, and hold the \"Reset\" button while plugging in the power cord. While pressing the \"Reset\" button, turn on the power, press and hold the \"Reset\" button for 5 seconds and release. While pressing the \"Reset\" button, turn on the power, press and hold the \"Reset\" button for 10 seconds and release."},{"location":"ble_proxy/gl-s10/user_manual/#led-description","title":"LED description","text":"LED Light Status Reset to factory setting Enter OTA mode OTA upgrade process Power  (Green light) Light on: Device is on  Light off: Device is off Blinks slowly Blinks fast Blinks alternatively BLE  (Green light) Light blinks: Paring Mode(Disconnected)  Light on: Paring Mode(Connected)  Light off: Scanning Mode Blinks slowly Blinks fast Blinks alternatively Network  (White light) Light blinks: Wi-Fi connected  Light on: Ethernet connected  Light off: Not connected Blinks slowly Blinks fast Blinks alternatively"},{"location":"ble_proxy/gl-s10/user_manual/#ble-beacon","title":"BLE beacon","text":"<p>BLE Beacon is an optional accessory. User can purchase gateway kit with beacon for a quick Demo. The beacon can also be used for indoor positioning, asset management and other scenarios. The rotating base makes the device easy to disassemble; and the base has 3M adhesive which makes it easy to fix in place. </p> <p>After turning on the BLE switch at the bottom of the beacon, the beacon will broadcast BLE signals at an interval of 300ms. Select the filter function of GL-S10 and identify the devices by the BLE MAC address printed at the bottom of the beacon. </p> <p> Figure 2</p>"},{"location":"ble_proxy/gl-s10/user_manual/#app-installation","title":"APP installation","text":"<p>Download and install GL-S10 Tool App on your phone, turn on the Bluetooth function of your phone (For Android phone users, please turn on Bluetooth and GPS), and follow the instructions in this user manual to configure your GL-S10.</p> Figure 3"},{"location":"ble_proxy/gl-s10/user_manual/#app-configuration","title":"App Configuration","text":""},{"location":"ble_proxy/gl-s10/user_manual/#set-configuration-mode","title":"Set configuration mode","text":"<p>Before using the app for configuration, set GL-S10 into its paring mode by pressing the Reset button of GL-S10 when the power is off, then turn on the power. Release the button when you see the BLE indicator in the middle flashes, and your GL-S10 will enter its pairing mode. </p>"},{"location":"ble_proxy/gl-s10/user_manual/#app-language","title":"App language","text":"<p>Start the app and select the app language, you can choose between English and Simplified Chinese.</p> Figure 4 Figure 5"},{"location":"ble_proxy/gl-s10/user_manual/#connecting-your-gl-s10","title":"Connecting your GL-S10","text":"<p>Click the \"scan\" button in the upper right corner. The scanning result automatically filters out non-GL-S10 devices. If more than one GL-S10 are scanned, select the devices you want to connect according to the BLE MAC address on the label at the bottom of your GL-S10 shell (as shown below). </p> <p>Note: WAN MAC address is BLE MAC address minus 1, WiFi MAC address is BLE MAC address minus 2</p> Figure 6 Figure 7"},{"location":"ble_proxy/gl-s10/user_manual/#home-page","title":"Home page","text":"<p>Select a GL-S10 device and enter the \"Manage Device\" interface as shown below   Figure 8</p>"},{"location":"ble_proxy/gl-s10/user_manual/#device-info","title":"Device Info","text":"<p>You can click to view the details of the device as shown below</p> Figure 9 Figure 10"},{"location":"ble_proxy/gl-s10/user_manual/#protocal-configuration","title":"Protocal configuration","text":"<p>To setup uplink connection using a Protocal on the WAN port, click \"Manage Device\" &gt; \"Protocal\" &gt; \"Protocal\". You can configure \"DHCP\" and \"Static IP\" mode, then click \"Done\" to save the settings as shown below.</p> Figure 11 Figure 12"},{"location":"ble_proxy/gl-s10/user_manual/#wi-fi-configuration","title":"Wi-Fi configuration","text":"<p>To connect to a primary gateway, click \"Manage Device\" &gt; \"WiFi\" &gt; \"Connect WiFi\" &gt; \"Scan WiFi\", and select your WiFi SSID. You can also select \"None\", \"WPA2\" or \"WPA2 Enterprise\" mode. Click \"Done\" on the upper right corner to confirm the setting as shown below. If you want to upgrade your WPA2 ENTERPRISE certificate, click \u201cUpgrade certificate\u201d. </p> Figure 13 Figure 14 <p> Figure 15</p>"},{"location":"ble_proxy/gl-s10/user_manual/#mqtt-configuration","title":"MQTT Configuration","text":"<p>To configure MQTT, click \"Manage Device\" &gt; \"MQTT Server\". Enter the address of your MQTT broker in the \"Host\" field, fill in the port number, username, and password. The \"TLS\" selection switches between TSL/SSL link and the TCP link. Enter a SUBSCRIBE message in the \"Command\" field and a SUBACK acknowledgement message in the \"Respond Topic\" field. You can also click \"Update Certificate\" below to update the MQTT encryption certificate. Click \"Done\" on the upper right corner to save the settings.</p> Figure 16 Figure 17"},{"location":"ble_proxy/gl-s10/user_manual/#report-configuration","title":"Report Configuration","text":"<p>Click \"Report Configuration\" in the interface of \"Manage Device\" to enter the interface of \"Report Configuration\". </p> <p>Click \"Report interval\", \"Topic\", \"Bluetooth RSSI threshold filtering\" to enter the relevant information configuration interface, fill in the configuration information and click the upper left corner to return to the previous page to save your settings.  </p> <p>Click \u201cBLE MAC Filter\u201d, \u201cComplete Local Name Filter\u201d, or \u201cManufacturer Specific Data Filter\u201d at the bottom and enter the relevant information to activate the filter. </p> <p>Note: Filter Rules Instructions</p> <ul> <li> <p>MAC Filter: The value range is 0~f, the characters are lowercase, and colons must be included; the string should be full match.</p> </li> <li> <p>Complete Local Name Filter: the characters are case-sensitive,the string should be full match; for any unsure information, please download the nFR Connect software to check.</p> </li> <li> <p>Manufacture Specific Data Filter: The value range is 0~f/F, the characters are case-sensitive and should be matched according to regular expressions.</p> </li> </ul> <p>If you purchased a gateway kit with the BLE Beacon, you also have the option to set BLE MAC filtering rules for the beacon in the app by entering the BLE MAC address information printed on the bottom of the beacon. </p> <p>Click \"Add New Rule\" or \"Remove\" to edit the filter settings and click \"Done\" on the upper right corner to save the settings. </p> Figure 18 Figure 19 Figure 20 Figure 21"},{"location":"ble_proxy/gl-s10/user_manual/#data-time-configuration","title":"Data &amp; Time configuration","text":"<p>Click \"Manage Device\" &gt; \"Date &amp; Time\". Select your time zone, fill in the SNTP service address and click the upper left corner to return to the previous page to save your settings, as shown below. </p> Figure 22 Figure 23"},{"location":"ble_proxy/gl-s10/user_manual/#auto-reboot-configuration","title":"Auto Reboot configuration","text":"<p>Click \"Manage Device\" &gt; \"Auto Reboot\". You can schedule a time to reboot GL-S10 on a daily-basis. Click the upper left corner to return to the previous page to save your settings, as shown below. </p> Figure 24 Figure 25"},{"location":"ble_proxy/gl-s10/user_manual/#ota-upgrade","title":"OTA upgrade","text":"<p>Click \"Manage Device\" &gt; \"Upgrade OTA\". Under \"OTA URL\", enter the http server address and click \"Save\" on the upper right corner. Click \"Upgrade OTA\" to save the URL path and initiate the upgrade. Click \"Update Certificate\" to update the OTA encryption certificate as shown below. </p> <p>Please keep your GL-S10 connected to the internet and do NOT turn off the power during the OTA upgrade. After the OTA upgrade is completed, your GL-S10 will automatically enter Scanning mode, and your app will not be able to search for GL-S10.  </p> Figure 26 Figure 27 Figure 28 Figure 29"},{"location":"ble_proxy/gl-s10/user_manual/#reboot-device","title":"Reboot device","text":"<p>Click \"Manage Device\" &gt; \"Reboot\", and a pop-up window will ask for a reboot confirmation. The device will reboot after clicking \"Sure\". After rebooting, the device will automatically enter Scanning mode, and your app will not be able to search for GL-S10.</p> <p> Figure 30</p>"},{"location":"ble_proxy/gl-s10/user_manual/#reset-device","title":"Reset device","text":"<p>Click \"Manage Device\" &gt; \"Reset\". A pop-up window will ask for a reset confirmation. When you click \"Sure\", all device configurations will be restored to the factory default settings. After resetting the device, it will automatically enter Scanning mode, and your app will be able to search for GL-S10.</p> <p> Figure 31</p>"},{"location":"ble_proxy/gl-s10/user_manual/#mqtt-configuration_1","title":"MQTT Configuration","text":"<p>When the GL-S10 is connected to the MQTT server, you can also use the MQTT API to configure the GL-S10. </p> <p>You can configure MQTT using a third-party tool - MQTT X, downloadable from https://mqttx.app/. </p> <p>The default MQTT setting is configured to connect with the beta cloud platform. Enter the configuration for GL-S10 and MQTT X client to activate the connection. The beta cloud platform is for testing only and not for other usage. </p>"},{"location":"ble_proxy/gl-s10/user_manual/#network-configuration","title":"Network Configuration","text":"<p>GL-S10 supports wired transmission and Wi-Fi for connecting to the router or gateway. The setting procedure can be found in section 3.6 Cable configuration and 3.7 Wi-Fi configuration. </p>"},{"location":"ble_proxy/gl-s10/user_manual/#mqtt-x-client-configuration","title":"MQTT X client configuration","text":"<p>Before doing the MQTT X client configuration, we need to configure the configuration of the MQTT server on S10 first. Find MQTT Server session in the S10 Tool APP.</p> <p>Here we are using the test MQTT server: iot-s10-test.gl-inet.cn. And the Port is: 1884, so we need to set the Host in the following figure: iot-s10-test.gl-inet.cn. And set Port: 1884.</p> Figure 32 Figure 33 <p>On the windows version of the MQTT X client, start the MQTT X software and add a new connection. To configure the beta cloud platform, enter the URL address iot-s10-test.gl-inet.cn and port 1884. Click the upper right corner of the page to connect. A successful connection is shown below in Figure 33. </p> <p> Figure 34 Figure 35</p>"},{"location":"ble_proxy/gl-s10/user_manual/#mqtt-message-editing-and-communicating-with-s10","title":"MQTT Message Editing and Communicating with S10","text":"<p>The default command topic for this firmware is GL-IoT/comTopic/{dev_MAC}, and the command reply topic is GL-IoT/rspTopic/{dev_MAC}. </p> <p>The BLE MAC address of the GL-S10 device we use in this example is: E8DB841E2B1E (The BLE MAC address is printed on the bottom of the device or in the app). </p> <p>In our testing, MQTT X sends data via GL-IoT/comTopic/E8DB841E2B1E and receives data from GL-S10 by subscribing to GL-IoT/rspTopic/E8DB841E2B1E. </p> <p>Below is a demo of how to set data (SET_DEV_MESSAGE) and obtain data from GL-S10 (GET_DEV_MESSAGE):</p> <p>Step 1: Subscribe to the GL-IoT/rspTopic/E8DB841E2B1E topic using MQTT X.  Figure 36</p> <p>Step 2: SET_WIFI_CONFIG</p> <p>API Function: Configure SSID and PWD of WIFI or SSID, user name, user password of WIFI WPA2, and try to connect to the corresponding route. </p> <p>{</p> <p>\"jsonrpc\": \"2.0\",</p> <p>\"method\": \"SET_WIFI_CONFIG\",</p> <p>\"params\": {</p> <p>\"type\":0,</p> <p>\"ssid\": \"Test\",</p> <p>\"pwd\": \"123456\"</p> <p>},</p> <p>\"id\": 1</p> <p>}</p> <p>Here we use \"Test\" for the SSID  and \"123456\" for the user passward.</p> <ul> <li>When type is equal to 0, SSID, PASSWORD can be set.</li> <li>When type is equal to 1, SSID, USERNAME, USERPASSWORD can be set.</li> <li>SSID: route name, length 0 - 32 characters.</li> <li>PWD: route password, length 0 - 64 characters.</li> <li>USERNAME: User name, length 0 - 32 characters.</li> <li>USERPWD: User password, length 0 - 64 characters.</li> </ul> <p> Figure 37</p> <p>Set data successfully:</p> <p> Figure 38</p> <p>Step 3: GET_WIFI_CONFIG</p> <p>API Function: Get the SSID and PWD of WIFI or SSID, user name, user password of WIFI WPA2\\</p> <p>{</p> <p>\"jsonrpc\" :   \"2.0\" ,</p> <p>\"method\" :   \"GET_WIFI_CONFIG\" ,</p> <p>\"params\" :   {</p> <p>\"type\" : 0</p> <p>},</p> <p>\"id\" :   2</p> <p>}</p> <ul> <li>When type is equal to 0, get SSID, PASSWORD.</li> <li>When type is equal to 1, get SSID, USERNAME, USERPASSWORD </li> </ul> <p> Figure 39</p> <p>Get data successfully:  Figure 40</p>"},{"location":"ble_proxy/gl-s10/user_manual/#ble-data-uploading","title":"BLE Data Uploading","text":"<p>After successfully establishing connection, GL-S10 automatically enters Scanning mode and scans for BLE signal during startup. If the MQTT server is connected, the BLE scan data will be packaged and uploaded to \"GL-IoT/dataTopic/{dev_MAC}\" topic in JSON format. ({dev_MAC} is the local BLE MAC address, in this example, the BLE MAC address of the GL-S10 device used is: E8DB841E2B1E). </p> <p>As shown above, the JSON fields have the following definitions</p> <ul> <li>MAC : Broadcast source address </li> <li>rssi : Broadcast source signal strength </li> <li>n : Broadcast source device name (this field will not appear if the broadcast source does not have a name) </li> <li>ad : Broadcast data advData </li> <li>ts : receive timestamp</li> </ul> <p>If you purchased a gateway kit with a BLE Beacon and adds filtering rules for the beacon BLE MAC address according to section 3.9, the JSON information viewed here is the BLE information broadcast by the beacon. The beacons are placed at different distances from the GL-S10 gateway (distance up to the decimeter level), and the value of rssi (broadcast source signal strength) may fluctuate based on distance.   Figure 41</p> <p> Figure 42</p>"},{"location":"ble_proxy/gl-s10/user_manual/#gl-s10-config-api","title":"GL-S10 Config API","text":"<p>This chapter define the commands to configure the GL-S10 device using the MQTT method. Command summary sheet</p>"},{"location":"ble_proxy/gl-s10/user_manual/#command-summary-sheet","title":"Command summary sheet","text":"Command Code Command Whether parameters are required Description 0x01 SET_WiFi_CONFIG Y Set up Wi-Fi configuration 0x02 GET_WiFi_CONFIG N Get Wi-Fi configuration 0x03 SET_NETWORK_CONFIG Y Set static IP or dynamic IP 0x04 GET_NETWORK_CONFIG N Get static IP or dynamic IP 0x05 GET_NETWORK_STATE N Get the current network status 0x06 WiFi_CONNECT_OR_DISCONNECT Y Wi-Fi connected or disconnected 0x07 SET_MQTT_URL Y Set MQTT URL 0x08 GET_MQTT_URL N Get MQTT URL 0x09 MQTT_CONNECT_OR_DISCONNECT Y MQTT connected or disconnected 0x0A SET_MQTT_TOPIC Y Set MQTT topic name 0x0B GET_MQTT_TOPIC N Get MQTT topic name 0x0C SET_MQTT_TI Y Set the MQTT data reporting time interval 0x0D GET_MQTT_TI N Get the MQTT data reporting time interval 0x0E SET_SNTP_TZ Y Set the SNTP server time zone 0x0F GET_SNTP_TZ N Get the SNTP server time zone 0x10 SET_SNTP_SERVER Y Set the SNTP server 0x11 GET_SNTP_SERVER N Get the SNTP server 0x12 SET_AUTO_REBOOT Y Set auto reboot time 0x13 GET_AUTO_REBOO N Get auto reboot timeL 0x14 SET_MAC_FILTER Y Add and remove MAC filter table entries 0x15 GET_MAC_FILTER Y Get MAC filter table entries 0x16 SET_CLN_FILTER Y Add and remove BLE Complete Local Name filter table entries 0x17 GET_CLN_FILTER N Get BLE Complete Local Name filter table entries 0x18 SET_MSD_FILTER Y Add and remove Manufacturer Specific Data filter table entries 0x19 GET_MSD_FILTER N Get Manufacturer Specific Data filter table entries 0x1A UPDATE_MQTT_CERT Y Update MQTT encryption certificates 0x1B UPDATE_WPA2_CERT Y Update Wi-Fi WPA2 encryption certificate 0x1C UPDATE_HTTPS_CERT Y Update HTTPS OTA encryption certificate 0x1D SET_OTA_URL Y Set the URL of the OTA server 0x1E GET_OTA_URL N Get the URL of the OTA server 0x1F OTA_STATUS N OTA upgrade status notification 0x20 GET_DEV_STATUS N Get device status 0x21 GET_DEV_MESSAGE N Get device message 0x22 RESTART_DEV N Reboot device 0x23 RESET_DEV N Reset device 0x24 SET_BLE_RSSI_FILTER Y Set RSSI filter thresholds 0x25 GET_BLE_RSSI_FILTER N Get RSSI filter thresholds 0x26 GET_WiFi_AP_LIST N Get a list of surrounding Wi-Fi AP information"},{"location":"ble_proxy/gl-s10/user_manual/#command-detail","title":"Command detail","text":""},{"location":"ble_proxy/gl-s10/user_manual/#set_wifi_config","title":"SET_WiFi_CONFIG","text":"<p>API function:  Configure the WiFi\u2019s SSID and password, or WiFi WPA2\u2019s SSID, username and password, then connect to the router. </p> <p>Data segment at reception: </p> CmdID Data 0x01 0x00\\n SSID\\nPWD\\n 0x01\\n SSID\\nUSERNAME\\nUSERPASSWORD\\n <p>Note:  Each paragraph of data is separated by the '\\n' character, as shown above, please follow the format. </p> <ul> <li> <p>When data[0] is equal to 0x00, SSID and PASSWORD are configurable. </p> </li> <li> <p>When data[0] is equal to 0x01, SSID, USERNAME, USERPASSWORD are configurable. </p> </li> <li> <p>SSID: router\u2019s name, maximum length of 1-32 characters. </p> </li> <li> <p>PWD: router\u2019s password, maximum length of 8-64 characters. </p> </li> <li> <p>USERNAME: username, maximum length of 1-32 characters. </p> </li> <li> <p>USERPASSWORD: user password, maximum length 1-64 characters.</p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x01 Result\\n <p>Note:  Each paragraph of data is separated by the '\\n' character, as shown above, please follow the format. </p> <ul> <li>Result\uff1a0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_wifi_config","title":"GET_WiFi_CONFIG","text":"<p>API Function: </p> <p>Get Wi-Fi SSID and PWD, or Wi-Fi WPA2 SSID, user name, user password </p> <p>Data segment at reception: </p> CmdID Data 0x02 0x00\\n 0x01\\n <ul> <li>When data[0] is equal to 0x00, get SSID, PASSWORD. </li> <li>When data[0] is equal to 0x01, get SSID, USERNAME, USERPASSWORD.</li> </ul> <p>Data segment at response: </p> CmdID Data 0x02 Result\\n 0x00\\n SSID\\nPWD\\n 0x01\\n SSID\\nUSERNAME\\nUSERPASSWORD\\n <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>When data[1] is equal to 0x00, get SSID, PASSWORD. </p> </li> <li> <p>When data[1] is equal to 0x01, get SSID, USERNAME, USERPASSWORD. </p> </li> <li> <p>SSID: router\u2019s name, maximum length of 1-32 characters. </p> </li> <li> <p>PWD: router\u2019s password, maximum length of 8-64 characters. </p> </li> <li> <p>USERNAME: username, length 1-32 characters. </p> </li> <li> <p>USERPASSWORD: user password, length 1-64 characters.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_network_config","title":"SET_NETWORK_CONFIG","text":"<p>API function: </p> <p>Set static IP or dynamic IP. </p> <p>Data segment at reception:</p> CmdID Data 0x03 0x00\\n 0x01\\n <ul> <li> <p>When data[0] is equal to 0x00, the device is set to DHCP auto-get IP mode.  </p> </li> <li> <p>When data[0] is equal to 0x01, the device is set to static IP mode, and IP, Netmask, Gw can be set. </p> </li> <li> <p>IP: fixed length, xxx is a number between 0-255, format XXX.XXX.XXX.XXX. </p> </li> <li> <p>Netmask: fixed length, xxx is a number between 0-255, format XXX.XXX.XXX.XXX. </p> </li> <li> <p>Gw: fixed length, xxx is a number between 0-255, format XXX.XXX.XXX.XXX. </p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x03 Result\\n <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_network_config","title":"GET_NETWORK_CONFIG","text":"<p>API Function: </p> <p>Get the network configuration of static IP or dynamic IP. </p> <p>Data segment at reception: </p> CmdID Data 0x04 0x00\\n 0x01\\n <ul> <li>When mode is equal to 0x00, it indicates that the device is in DHCP auto-allocation state without any data. When mode equals to 0x01, it indicates that the device is in static IP allocation state, and available to receive IP, Netmask and Gw. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x04 Result\\n 0x00\\n  /  0x01\\n IP\\nNetmask\\nGw\\n <ul> <li> <p>Result: 0x00 represent execution success; 0x01 represents execution failure. </p> </li> <li> <p>When data[1] is equal to 0x00, it indicates that the device is in DHCP auto-assignment state, and the data behind is empty. </p> </li> <li> <p>When data[1] is equal to 0x01, it indicates that the device is in static IP allocation state, and available to receive IP, Netmask, and Gw. </p> </li> <li> <p>IP: fixed length, xxx is a number from 0-255, format XXX.XXX.XXX. </p> </li> <li> <p>Netmask: fixed length, xxx is a number from 0-255, format XXX.XXX.XXX.XXX. </p> </li> <li> <p>Gw: fixed length, xxx is a number from 0-255, format XXX.XXX.XXX.XXX. </p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_network_state","title":"GET_NETWORK_STATE","text":"<p>API Function: </p> <p>Get the current network state: State, Mode, isDhcp , IP, SSID. </p> <p>Data segment at reception: </p> CmdID Data 0x05  /  <ul> <li>Data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x05 Result\\n State\\nMode\\nisDhcp\\nIP\\nSSID\\n <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>State: indicates the status of the connection (MQTT server connection), character '0' means connected, character '1' means disconnected, occupies one byte. </p> </li> <li> <p>Mode: indicates the connection mode, character '0' indicates connection via Wi-Fi, character '1' indicates connection via Ethernet cable, occupies one byte. </p> </li> <li> <p>isDhcp: character '0' means it is automatically assigned, character '1' means it is not automatically assigned, occupies one byte. </p> </li> <li> <p>IP: local IP address, xxx is a number between 0-255, format XXX.XXX.XXX.XXX. </p> </li> <li> <p>SSID: SSID of the connected router, length 1-32 characters. </p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#wifi_cpnnect_or_disconnect","title":"WiFi_CPNNECT_OR_DISCONNECT","text":"<p>API function: </p> <p>Trigger Wi-Fi connection or disconnects. </p> <p>Data segment at reception: </p> CmdID Data 0x06 0x00\\n 0x01\\n <ul> <li> <p>When data[0] is equal to 0x00, it triggers the device to connect to Wi-Fi.  </p> </li> <li> <p>When data[0] is equal to 0x01, it triggers the device to disconnect Wi-Fi. </p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x06 Result\\n <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_mqtt_url","title":"SET_MQTT_URL","text":"<p>API function: </p> <p>Set MQTT_URL. </p> <p>Data segment at reception: </p> CmdID Data 0x07 MQTT_URL\\n <p>MQTT_URL field: </p> <ul> <li>Data field format: mqtt(s)://username:password@host:port </li> <li>mqtt : TCP connection</li> <li>mqtts : TSL/SSL connection</li> <li>username : Username, length 0-32 characters</li> <li>password : User password, length 0-64 characters</li> <li>host : Host name, length 7-128 characters</li> <li>port \uff1aHost port, range 0-65535, length 1-5 characters</li> </ul> <p>Data segment at response: </p> CmdID Data 0x07 Result\\n <ul> <li>Result: 0x00 Execution success; 0x01 Execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_mqtt_url","title":"GET_MQTT_URL","text":"<p>API Function: </p> <p>Get MQTT_URL. </p> <p>Data segment at reception:</p> CmdID Data 0x08  /  <ul> <li>Data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x08 Result\\n  MQTT_URL\\n <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul> <p>MQTT_URL field: </p> <ul> <li>Data field format: mqtt(s)://username:password@host:port </li> <li>mqtt : TCP connection</li> <li>mqtts : TSL/SSL connection</li> <li>username : Username, length 0-32 characters</li> <li>password : User password, length 0-64 characters</li> <li>host : Host name, length 7-128 characters</li> <li>port \uff1aHost port, range 0-65535, length 1-5 characters</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#mqtt_connect_or_disconnect","title":"MQTT_CONNECT_OR_DISCONNECT","text":"<p>API function: </p> <p>Activate trigger to connect to the MQTT server. </p> <p>Data segment at reception: </p> CmdID Data 0x09 0x00\\n 0x01\\n <ul> <li> <p>When data[0] shows 0x00, it triggers the device to connect to the MQTT server. </p> </li> <li> <p>When data[0] shows 0x01, it triggers the device to disconnect with the MQTT server. </p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x09 Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_mqtt_topic","title":"SET_MQTT_TOPIC","text":"<p>API function: </p> <p>Configure comTopic, dataTopic and rspTopic topics. </p> <p>Data segment on reception. </p> CmdID Data 0x0A comTopic\\ndataTopic\\nrspTopic\\n  <ul> <li> <p>comTopic: command for subscribing a topic, does not support Chinese, length 1-128 characters. </p> </li> <li> <p>dataTopic: publishing a topic, does not support Chinese, maximum length of 1-128 characters. </p> </li> <li> <p>rspTopic: Unsuback a topic, does not support Chinese, maximum length of 1-128 characters. </p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x0A Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_mqtt_topic","title":"GET_MQTT_TOPIC","text":"<p>API Function: </p> <p>Get comTopic, dataTopic and rspTopic topics. </p> <p>Data segment at reception: </p> CmdID Data 0x0B  /  <ul> <li>data equals to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x0B Result\\n  comTopic\\ndataTopic\\nrspTopic\\n <ul> <li> <p>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>comTopic: command for subscribing a topic, does not support Chinese, length 1-128 characters </p> </li> <li> <p>dataTopic: publishing a topic, does not support Chinese, maximum length of 1-128 characters </p> </li> <li> <p>rspTopic: Unsuback a topic, does not support Chinese, maximum length of 1-128 characters</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_mqtt_ti","title":"SET_MQTT_TI","text":"<p>API Function: </p> <p>Set the MQTT data upload time interval. </p> <p>Data segment at reception:</p> CmdID Data 0x0C  IntervalTime\\n   <ul> <li>IntervalTime: MQTT data reporting time interval, 100ms - 4294967294ms, length 3-10. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x0C Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_mqtt_ti","title":"GET_MQTT_TI","text":"<p>API Function: </p> <p>Get the MQTT data upload interval. </p> <p>Data segment at reception:</p> CmdID Data 0x0D  /  <ul> <li>data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x0D Result\\n IntervalTime\\n  <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>IntervalTime: MQTT data reporting time interval, 100ms - 4294967294ms, length 3-10. </p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_sntp_tz","title":"SET_SNTP_TZ","text":"<p>API function: </p> <p>Set the device time zone. </p> <p>Data segment at reception: </p> CmdID Data 0x0E Timezone\\n <ul> <li>Timezone: Time zone format, UTC+X or UTC-X (X range 0-12), default Timezone = UTC+8. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x0E Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_sntp_tz","title":"GET_SNTP_TZ","text":"<p>API Function: </p> <p>Get the device time zone. </p> <p>Data segment at reception: </p> CmdID Data 0x0F  /  <ul> <li>Data is equal to null.</li> </ul> <p>Data segment at response: </p> CmdID Data 0x0F Result\\n Timezone\\n <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>Timezone: Time zone format, UTC+X or UTC-X (X range 0-12), default Timezone = UTC-8.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_sntp_server","title":"SET_SNTP_SERVER","text":"<p>API function: </p> <p>Set the SNTP server address. </p> <p>Data segment at reception:</p> CmdID Data 0x10  ServerURL\\n   <ul> <li>ServerURL: SNTP server URL setting, maximum length of 1-128 characters. </li> </ul> <p>Data segment at response:</p> CmdID Data 0x10  Result\\n   <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_sntp_server","title":"GET_SNTP_SERVER","text":"<p>API Function: </p> <p>Get the SNTP server address. </p> <p>Data segment at reception:</p> CmdID Data 0x11  /   <ul> <li>Data is equal to null </li> </ul> <p>Data segment at response: </p> CmdID Data 0x11 Result\\n ServerURL\\n  <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>ServerURL: SNTP server URL setting, maximum length of 1-128 characters.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_auto_reboot","title":"SET_AUTO_REBOOT","text":"<p>API Function: </p> <p>Set the auto restart time and switch status. </p> <p>Data segment at reception:</p> CmdID Data 0x12  RstState\\nRstTime\\n  <ul> <li> <p>RstState: indicates whether to turn on the daily restart, character '0' means turn on, character '1' means turn off, occupies one byte. </p> </li> <li> <p>RstTime: daily restart time, format XX:XX 24 hours, range 00:00 - 23:59, occupies five bytes. </p> </li> </ul> <p>Data segment at response:</p> CmdID Data 0x12 Result\\n <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_auto_reboot","title":"GET_AUTO_REBOOT","text":"<p>API Function: </p> <p>Get the auto restart time and switch status. </p> <p>Data segment at reception:</p> CmdID Data 0x13  /  <ul> <li>Data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x13  Result\\n   RstState\\nRstTime\\n  <ul> <li> <p>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>RstState: indicates whether to turn on the daily restart, character '0' means turn on, character '1' means not turn on, takes up one byte. </p> </li> <li> <p>RstTime: daily restart time, format XX:XX 24 hours, range 00:00 - 23:59, occupies five bytes.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_mac_filter","title":"SET_MAC_FILTER","text":"<p>API Function: </p> <p>Add or remove MAC filter table entries. </p> <p>Data segment on reception.</p> CmdID Data 0x14  MODE\\nMAC\\n  <ul> <li> <p>MODE : 0x00 is Add mode, which adds the MAC field to the MAC table of the device; 0x01 is Delete mode, which removes the MAC field from the MAC table. </p> </li> <li> <p>MAC: Format XX:XX:XX:XX:XX:XX, XX range [0-9a-fA-F].</p> </li> </ul> <p>Data segment at response: </p> CmdID Data 0x14  Result\\n  <ul> <li>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_mac_filter","title":"GET_MAC_FILTER","text":"<p>API Function: </p> <p>Get MAC filter table entries. </p> <p>Data segment at reception: </p> CmdID Data 0x15  /  <ul> <li>Data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x15  Result\\n   AddMAC0\\nAddMAC1\\n\u2026\\n  <ul> <li> <p>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>AddMAC: AddMAC0, AddMAC1 are single MAC, it will send all the data in the MAC filter table in a batch according to the format shown above, single format XX:XX:XX:XX:XX:XX, XX range [0-9a-fA-F].</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_cln_filter","title":"SET_CLN_FILTER","text":"<p>API Function: </p> <p>Adds or removes a BLE device name filter table entry. </p> <p>Data segment at reception: </p> CmdID Data 0x16  MODE\\nAddCLN\\n  <ul> <li> <p>MODE : 0x00 is Add mode, which adds the AddCLN field to the device's BLE device name table; 0x01 is Delete mode, which removes the AddCLN field from the BLE device name table. </p> </li> <li> <p>AddCLN: Single device name, length 1-32 characters. </p> </li> </ul> <p>Data segment at response:</p> CmdID Data 0x16  Result\\n  <ul> <li>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_cln_filter","title":"GET_CLN_FILTER","text":"<p>API Function: </p> <p>Get the BLE device name filter table entry. </p> <p>Data segment at reception: </p> CmdID Data 0x17  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response:</p> CmdID Data 0x17  Result\\n   AddCLN0\\n AddCLN1\\n\u2026\\n  <ul> <li> <p>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>AddCLN: AddCLN0, AddCLN1 are single CLN, which will send all the data in the CLN filter table together. </p> </li> <li> <p>CLN: BLE Complete Local Name.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_msd_filter","title":"SET_MSD_FILTER","text":"<p>API Function: </p> <p>Add or remove BLE vendor custom data filter table entries. </p> <p>Data segment on reception.</p> CmdID Data 0x18  MODE\\nAddMSD\\n   <ul> <li> <p>MODE : 0x00 is Add mode which adds the AddMSD field to the device's BLE vendor custom data table; 0x01 is Delete mode which removes the AddMSD field from the BLE vendor custom data table. </p> </li> <li> <p>AddMSD: single BLE vendor-defined data, length 2-64 characters, and length must be a multiple of 2, character range [0-9a-fA-F].</p> </li> </ul> <p>Data segment at response:</p> CmdID Data 0x18  Result\\n  <ul> <li>Result\uff1a0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_msd_filter","title":"GET_MSD_FILTER","text":"<p>API Function: </p> <p>Get BLE vendor custom data filter table entries. </p> <p>Data segment on reception.</p> CmdID Data 0x19  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response:</p> CmdID Data 0x19  Result\\n   AddMSD0\\n AddMSD1\\n\u2026\\n   <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>AddMSD: AddMSD0, AddMSD1 are single MSD, which will send all the data in the MSD filter table together. </p> </li> <li> <p>MSD: Manufacturer Specific Data.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#update_mqtt_cert","title":"UPDATE_MQTT_CERT","text":"<p>API functionality: </p> <p>Update MQTT encryption certificate. </p> <p>Data segment at reception:</p> CmdID Data 0x1A  MODE\\nMqttCertURL\\n   <ul> <li> <p>MODE: 0x00 updates certificate immediately, 0x01 only saves certificate URL, and does not update certificate immediately. Occupies 1 character. </p> </li> <li> <p>MQTT encrypted certificate URL address, length 1-500 characters. </p> </li> </ul> <p>Note: If the Data segment is null, the MqttCertURL will be restored to the default configuration, and the certificate will be updated. </p> <p>Data segment at response:</p> CmdID Data 0x1A  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#update_wpa2_cert","title":"UPDATE_WPA2_CERT","text":"<p>API function: </p> <p>Update Wi-Fi WPA2 encryption certificate. </p> <p>Data segment at reception: </p> CmdID Data 0x1B  MODE\\nWpa2CertURL\\n   <ul> <li> <p>MODE: 0x00 updates certificate immediately, 0x01 only saves certificate URL, and does not update certificate immediately. Occupies 1 character. </p> </li> <li> <p>Wpa2CertURL: WPA2 encryption certificate URL address, length 1-500 characters. </p> </li> </ul> <p>Note: If the Data segment is null, the Wpa2CertURL will be restored to the default configuration, and the certificate will be updated. </p> <p>Data segment at response: </p> CmdID Data 0x1B  Result\\n   <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#update_https_cert","title":"UPDATE_HTTPS_CERT","text":"<p>API functions: </p> <p>Update HTTPS encryption certificate. </p> <p>Data segment at reception:</p> CmdID Data 0x1C  MODE\\nHttpsCertURL\\n  <ul> <li> <p>MODE: 0x00 updates certificate immediately, 0x01 only saves certificate URL, and does not update certificate immediately. Occupies 1 character. </p> </li> <li> <p>HttpsCertURL: HTTPS encrypted certificate URL address, length 1-500 characters. </p> </li> </ul> <p>Note: If the Data segment is null, the HttpsCertURL will be restored to the default configuration, and the certificate will be updated.</p> <p>Data segment at response: </p> CmdID Data 0x1C  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure. </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_ota_url","title":"SET_OTA_URL","text":"<p>API function: </p> <p>Set the OTA URL. </p> <p>Data segment at reception:</p> CmdID Data 0x1D  updateNow\\nOtaURL\\n   <ul> <li> <p>updateNow: whether to upgrade OTA immediately, occupies 1 byte, character '0' will save the URL and upgrade immediately, character '1' will only save the url without upgrading. </p> </li> <li> <p>OtaURL: the server link for OTA upgrade, length 1-512 characters. </p> </li> </ul> <p>Note: If the Data segment is null, OtaURL will be restored to the default configuration, but will not trigger OTA. </p> <p>Data segment at response: </p> CmdID Data 0x1D  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_ota_url","title":"GET_OTA_URL","text":"<p>API Function: </p> <p>Get the OTA URL. </p> <p>Data segment at reception: </p> CmdID Data 0x1E  /  <ul> <li>Data is equal to null. </li> </ul> <p>Data segment at response: </p> CmdID Data 0x1E  Result\\n   OtaURL\\n   <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>OtaURL: the server link of OTA upgrade, length 1-512 characters.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#ota_status","title":"OTA_STATUS","text":"<p>API function: </p> <p>Reply result after OTA completion, initiated by the device after OTA completion. </p> <p>Data segment at response: </p> CmdID Data 0x1F  Result\\n   /  <ul> <li>Result\uff1a0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_dev_status","title":"GET_DEV_STATUS","text":"<p>API Function: </p> <p>Get device Wi-Fi RSSI, networking status, server connection status. </p> <p>Data segment at reception:</p> CmdID Data 0x20  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response: </p> CmdID Data 0x20  Result\\n   WiFi_RSSI\\nIS_CONNECT_NETWORK\\nIS_CONNECT_SERVER\\nWiFi_MODE\\n  <ul> <li> <p>Result\uff1a0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>WiFi_RSSI: RSSI of the connected router, range -96 ~ 0, occupies 1 byte, signed character. </p> </li> <li> <p>IS_CONNECT_NETWORK: network connection status 0x00 means not connected; 0x01 means connected. </p> </li> <li> <p>IS_CONNECT_SERVER: MQTT server connection status 0x00 means not connected; 0x01 means connected. </p> </li> <li> <p>WiFi_MODE: Wi-Fi connection mode [0x00 -&gt; no password] [0x01 -&gt; wpa2 personal encryption] [0x02 -&gt; wpa2 enterprise encryption]</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_dev_message","title":"GET_DEV_MESSAGE","text":"<p>API Function: </p> <p>Get device Wi-Fi MAC, BLE MAC, SN, Device ID, firmware version number. </p> <p>Data segment at reception: </p> CmdID Data 0x21  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response: </p> CmdID Data 0x21  Result\\n   BLE_MAC\\nWiFi_MAC\\nSN\\nDevice_ID\\nFirmwareVersion\\n   <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>WiFi_MAC: Format XX:XX:XX:XX:XX:XX, XX range [0-9a-fA-F]. </p> </li> <li> <p>BLE_MAC: Format XX:XX:XX:XX:XX:XX:XX , XX range [0-9a-fA-F]. </p> </li> <li> <p>SN: Device SN code, length 16 characters. </p> </li> <li> <p>Device_ID: device ID code, length 7 characters. </p> </li> <li> <p>FirmwareVersion: firmware version number, length 0-32 characters.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#restart_dev","title":"RESTART_DEV","text":"<p>API function: </p> <p>Reboot the device. </p> <p>Data segment at reception: </p> CmdID Data 0x22  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response: </p> CmdID Data 0x22  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#reset_dev","title":"RESET_DEV","text":"<p>API function: </p> <p>Reset the device.</p> <p>Data segment at reception: </p> CmdID Data 0x23  /  <ul> <li>Data is equal to null</li> </ul> <p>Data segment at response: </p> CmdID Data 0x23  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#set_ble_rssi_filter","title":"SET_BLE_RSSI_FILTER","text":"<p>API function: </p> <p>Set the BLE_RSSI filter threshold. </p> <p>Data segment at reception:</p> CmdID Data 0x24  BLERssiFilter\\n   <ul> <li>BLERssiFilter: char type Range -100 ~ 0. Default value: -100 </li> </ul> <p>Data segment at response: </p> CmdID Data 0x24  Result\\n  <ul> <li>Result: 0x00 represents execution success; 0x01 represents execution failure.</li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_ble_rssi_filter","title":"GET_BLE_RSSI_FILTER","text":"<p>API Function: </p> <p>Get the BLE_RSSI filter threshold. </p> <p>Data segment at reception:</p> CmdID Data 0x25  /  <p>Data segment at response: </p> CmdID Data 0x25  Result\\n   BLERssiFilter\\n   <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>BLERssiFilter: char type Range -100 ~ 0.</p> </li> </ul>"},{"location":"ble_proxy/gl-s10/user_manual/#get_wifi_ap_list","title":"GET_WiFi_AP_LIST","text":"<p>API Function: </p> <p>Get the list of surrounding Wi-Fi AP information. </p> <p>Data segment at reception:</p> CmdID Data 0x26  /  <p>Data segment at response: </p> CmdID Data 0x26  Result\\n    {  \"WiFi_AP_LIST\":   [   {\"SSID\": \"XXXX\",\"RSSI\":XXX,\"authMode\": X},   {\"SSID\": \"XXXX\",\"RSSI\":XXX, \"authMode\":X},   {\"SSID\": \"XXXX\",\"RSSI\": XXX, \"authMode\": X},   \u2026\u2026   ]   }    <ul> <li> <p>Result: 0x00 represents execution success; 0x01 represents execution failure. </p> </li> <li> <p>SSID: router name, in string form, valid length 0-32 </p> </li> <li> <p>RSSI: Routing signal strength, numeric type, valid range -96 ~ 0. </p> </li> <li> <p>AUTH_MODE: Routing encryption method, numeric type, valid range 0 ~ 7. See the following table for the meaning.</p> </li> </ul> CmdID Data 0  authenticate mode : open  1  authenticate mode : WEP  2  authenticate mode : WPA_PSK  3  authenticate mode : WPA2_PSK  4  authenticate mode : WPA_WPA2_PSK  5  authenticate mode : WPA2_ENTERPRISE  5  authenticate mode : WPA2_ENTERPRISE  6  authenticate mode : WPA3_PS  7  authenticate mode : WPA2_WPA3_PSK    -   default"},{"location":"ble_proxy/gl-s20/","title":"Introduction","text":"<p>GL-S20 is a THREAD border router engineered to provide an essential &amp; streamlined IoT connectivity solution. It supports THREAD, BLE, as well as Wi-Fi &amp; optional Ethernet connectivity for communication with cloud servers. This device is designed to focus on core performance factors, such as low power consumption, compact hardware, and reliability. It leverages the network efficiency of the THREAD protocol and is also interoperable with the MATTER standard.</p>"},{"location":"ble_proxy/gl-s20/examples/","title":"Examples","text":"<p>Coming soon</p>"},{"location":"ble_proxy/gl-s20/hardware/","title":"Hardware","text":""},{"location":"ble_proxy/gl-s20/hardware/#specification","title":"Specification","text":"<p>GL-s20 specification</p>"},{"location":"ble_proxy/gl-s20/software/","title":"Software","text":"<p>Coming soon</p>"},{"location":"ble_proxy/gl-s20/tools/","title":"Tools","text":"<p>Coming soon</p>"},{"location":"iot_dev_board/","title":"GL DEV BOARD","text":"<p>In order to give users a more intuitive experience of the thread network functions, we have developed a set of Thread development boards. The GL DEV BOARD is a page dedicated to controlling the Thread development board for GL development and displaying relevant data.</p>"},{"location":"iot_dev_board/#devices","title":"Devices","text":"<p>The TDB(GL Thread DEV Board) can join the network by using thread Commissioning, but you need to know the EUI64 of the TDB and the device pre-shared key PSKd. To simplify the configuration process, we have pre-built fixed keys in the firmware, which can be added quickly as follows.</p>"},{"location":"iot_dev_board/#add-tdb-to-the-network","title":"Add TDB to the network","text":"<ol> <li> <p>Click on Add Devices.</p> </li> <li> <p>Click on Allow New Devices To Join and Click on Apply.</p> <p></p> </li> <li> <p>Power up the TDB, press and hold SW2 for three seconds or more to restore the factory settings, then press SW2 briefly. You can see the green light flashing.</p> </li> <li> <p>When the green light of the development board is always on, it means that it successfully joins the network.</p> </li> <li> <p>The first time a device is successfully added, the web page will automatically pop up New Devices to prompt for configuration Type/Name information</p> <p></p> <ul> <li>Type: If theTDB comes with an A0 board, please select \"A0+A1\".</li> <li>Name: User defined names.</li> </ul> </li> <li> <p>You can see that the development board was successfully added to the Online card.</p> <p></p> </li> </ol>"},{"location":"iot_dev_board/#control-tdb","title":"Control TDB","text":""},{"location":"iot_dev_board/#device-detail","title":"Device Detail","text":"<p>You can view the current data of the TDB on the Device Detail page.</p> <p></p>"},{"location":"iot_dev_board/#view-records","title":"View Records","text":"<p>You can view a graph of the TDB's historical data on the View Records page.</p> <p></p>"},{"location":"iot_dev_board/#edit-device","title":"Edit Device","text":"<p>You can edit the settings of the TDB on the Edit Device page.</p> <p></p>"},{"location":"iot_dev_board/#code-examples","title":"Code Examples","text":"<p>We have prepared some sample code to control the TDB. You can run them in the S200 backend, or write your own applications by referring to these examples.</p> <p></p>"},{"location":"iot_dev_board/#reset-device","title":"Reset Device","text":"<p>If you want to remove the TDB from the network, use the reset device function. </p> <p></p> <p>Note: This will restore the TDB to its factory settings.</p>"},{"location":"iot_dev_board/#automations","title":"Automations","text":"<p>To enable users to better test the thread network in real-life situations, we offer some simple, restricted device linkage functions.</p> <p></p>"},{"location":"iot_dev_board/#add-an-automation-with-device-action","title":"Add an automation with device action","text":"<p>As an example, create an automation example: press a button on either board and the RGB lights on/off on both boards.</p> <ol> <li> <p>Create a name</p> <p></p> </li> <li> <p>Select type of trigger conditions</p> <p></p> </li> <li> <p>Select the device(s) to be used as an trigger.</p> <p></p> </li> <li> <p>Select trigger conditions</p> <p></p> </li> <li> <p>Select the type of operation</p> <p></p> </li> <li> <p>Select the device(s) to be used as an actuator</p> <p></p> </li> <li> <p>Select actuator's actions</p> <p></p> </li> <li> <p>You can see the automation cards that have been created.</p> <p></p> </li> </ol>"},{"location":"iot_dev_board/#add-an-automation-with-webhook","title":"Add an automation with webhook","text":"<p>A webhook in web development is a method of augmenting or altering the behavior of a web page or web application with custom callbacks.</p> <p>As an example, I need TDB for home security alarms. When someone enters, send a message to Discord via webhook.</p> <ol> <li> <p>Create a webhook url from Discord</p> <p>Please refer to the official Discord documentation. Please copy the url of the webhook, the next steps need to use.</p> </li> <li> <p>Fellow the steps below to create an automation.</p> <p></p> <p>Give it a name for the automation.</p> <p></p> <p>Select Sensor trigger.</p> <p></p> <p>Select devices.</p> <p></p> <p>Select trigger condition.</p> <p></p> <p>Select Webhook.</p> <p></p> <p>Paste the url you got when you created the webhook.</p> <p></p> <p>Enter the message you wish to send to Discord. Discord specifies that the message sent provide a value for at least one of content, embeds, components, or file.</p> <p>Note: Different Internet applications have their own definitions for the content and format of messages, please refer to the relevant documentation.</p> <p>Finally, an Automation that triggers the webhook is successfully created.</p> <p></p> <p>When the TDB's pyroelectric infrared sensor is triggered, the GL-S200 sends the specified message to the webhook that is set up.</p> <p></p> </li> </ol> <p>Still have questions? Visit our Community Forum.</p>"},{"location":"mqtt_vpn/","title":"Overview","text":"<p>Coming soon.</p>"},{"location":"thread_board_router/gl-s200/","title":"GL-S200","text":"<p>GL-S200 is a THREAD Border Router designed for users to host and manage low power and reliable IoT mesh networks. The device supports both THREAD and BLE protocols, and it comes with an optional pre-configured THREAD development board for a simplified integration process to IoT devices.</p> <p>GL-S200 is a firmware based on routers. It has many functions similar to our other routers, but also includes targeted IoT features, such as:</p> <ul> <li> <p>Bluetooth</p> </li> <li> <p>GL Dev Board</p> </li> <li> <p>Thread Mesh</p> </li> </ul> <p>For other functions that are the same as routers, please refer to the router documentation.</p> <ul> <li> <p>First time Setup</p> </li> <li> <p>Internet</p> <ul> <li>Internet</li> <li>Ethernet</li> <li>Repeater</li> <li>Cellular</li> <li>Tethering</li> </ul> </li> <li> <p>Wireless</p> </li> <li> <p>Clients</p> </li> <li> <p>VPN</p> <ul> <li>VPN Dashboard</li> <li>OpenVPN Client</li> <li>OpenVPN Server</li> <li>WireGuard Client</li> <li>WireGuard Server</li> </ul> </li> <li> <p>Applications</p> <ul> <li>Plug-ins</li> <li>Dynamic DNS</li> <li>GoodCloud</li> </ul> </li> <li> <p>Network</p> <ul> <li>Firewall</li> <li>Multi-WAN</li> <li>LAN</li> <li>DNS</li> <li>Network Mode</li> <li>Mac Clone</li> <li>IGMP Snooping</li> </ul> </li> <li> <p>System</p> <ul> <li>Overview</li> <li>Upgrade</li> <li>Scheduled Tasks</li> <li>Admin Password</li> <li>Time Zone</li> <li>Toggle Button Settings</li> <li>Log</li> <li>Reset Firmware</li> <li>Advanced Settings</li> </ul> </li> </ul>"},{"location":"thread_board_router/gl-s200/bluetooth/","title":"Bluetooth","text":""},{"location":"thread_board_router/gl-s200/bluetooth/#bluetooth-devices","title":"Bluetooth Devices","text":"<p>On the Bluetooth devices page you can turn the current Bluetooth function on/off and modify the Bluetooth scanning settings.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#scan-settings","title":"Scan Settings","text":"<ul> <li>Scan type: switching between active or passive scanning.</li> <li>Scan Interval Time: the interval between the start times of two consecutive scan windows.</li> <li>Scan Window Time: the width of time to perform a scan.</li> <li>PHY: If coded phy is selected, traditional broadcast packets cannot be scanned.</li> </ul> <p>Click on Apply to complete the setup of Bluetooth scanning.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#bluetooth-scanning-mode","title":"Bluetooth Scanning Mode","text":"<p>The S200 offers three scanning modes: Legacy Mode, Extended Mode and Synchronize Mode. In Legacy Mode and Extended Mode, you can custom configure filters to filter the scanned Bluetooth data. If you change one of these configurations, click on this button to make the current configuration take effect.</p> <p></p> <p>RSSI Threshold\uff1aIf you set the threshold, the gateway will only report data from devices whose signal strength is greater than the value.</p> <p>MAC Filters\uff1aClick on the settings icon.If the switch is on, the configuration in the MAC filter will take effect. If the switch is off, the configuration in the filter will be disabled.MAC filter input rules are as follows.</p> <ul> <li>Case insensitive;</li> <li>Several MAC addresses distinguished by line feeds;</li> <li>Single MAC addresses support splitting by the character ':' and the character '-' ;</li> <li>Example of mac to be matched:112233445566<ul> <li>Prefix matching(needs to start with ^,followed by 1~12 hexadecimal characters)  e.g.^112233</li> <li>Suffix matching(needs to end with \\$,followed by 1~12 hexadecimal characters)  e.g.445566$</li> <li>Any position matching(limited to 1~12 hexadecimal characters)  e.g.334455</li> <li>Full match(Support for regular writing formats) e.g.112233445566/11:22:33:44:55:66/11-22-33-44-55-66</li> </ul> </li> </ul> <p></p> <p>Raw Data Filters :If you click on the settings icon, the configuration of the raw data filter will take effect if the switch is on, and if the switch is off, the configuration in the filter will be disabled. - The raw data filter supports all regular expressions and requires you to enter the data to be matched in hexadecimal format. - If you need an exact match for the field you are entering, add \"^\" and \"$\" before and after the field, e.g. \\^616263\\$.</p> <p></p> <p>Synchronize up to 4 cycles of broadcasts simultaneously in Synchronize Mode</p> <p></p> <ul> <li>Skip \uff1aMaximum number of periodic advertising packets that can be skipped after successful reception.</li> <li>Sync Timeout\uff1aThe maximum time allowed for successful reception, if this time is exceeded the sync will be lost.</li> </ul> <p>Click on Add Configuration for local configuration. </p> <ul> <li>Address Type: Address type of the device to be synchronized</li> <li>Address:Address of the device to be synchronized</li> <li>SID\uff1aAdvertising set identifiers</li> </ul>"},{"location":"thread_board_router/gl-s200/bluetooth/#broadcast-packets","title":"Broadcast Packets","text":"<p>After setting the Bluetooth scan settings correctly,click on the Apply button and you will see a list of scanned Bluetooth radio data appear below. You can refresh the list at any time by clicking the Refresh button.</p> <p></p> <ul> <li>RSSI: the wireless signal strength of this broadcast packet.</li> <li>Device Name: the data segment of this broadcast packet with an AD Type of 0x09, or Unknow if it does not exist.</li> <li>MAC: the MAC address of the source of this broadcast.</li> <li>Type: Types of Bluetooth packets as defined by the Bluetooth SIG\u3002</li> <li>Raw Data: the original data of this broadcast packet.</li> <li>TX Power:Transmitting power.</li> </ul> <p>If you need to see the details of a broadcast packet, please click on it. We provide two ways of presenting the data.</p> <ul> <li> <p>Structured data presentation: parsing the broadcast packet data according to the AD structure defined by the Bluetooth Alliance, splitting and parsing the data of the individual AD segments.</p> <p></p> </li> <li> <p>Raw data presentation: parsing of broadcast packet data according to the AD structure defined by the Bluetooth Alliance, splitting but not parsing out the raw data of individual AD segments.</p> </li> </ul>"},{"location":"thread_board_router/gl-s200/bluetooth/#bluetooth-remote-manage","title":"Bluetooth Remote Manage","text":"<p>On the Bluetooth Remote Management page you can choose to turn remote management on/off and modify the relevant remote server configuration.</p> <p></p> <p>We provide two methods of communication to the server: MQTT and HTTP.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#mqtt","title":"MQTT","text":"<ul> <li>Host\uff1aserver address, either a domain name or an IP address;</li> <li>Port\uff1aserver port;</li> <li>Enable TLS\uff1awhether to enable TLS configuration;</li> <li>Username\uff1athe MQTT client username;</li> <li>Password\uff1athe MQTT client password;</li> <li>Topic<ul> <li>Report: the gateway will use this topic to push the scanned Bluetooth data to the MQTT Broker;</li> <li>Command: the gateway will subscribe to the topic to receive control commands issued by the remote server;</li> <li>Response: the gateway will use the topic to send the command's response or execution result in response to the remote server.</li> </ul> </li> </ul> <p>If you need to enable TLS configuration, please click on the Enable TLS button and proceed to configure your TLS parameters.</p> <p></p> <ul> <li> <p>Encryption Mode\uff1aEncryption mode with the server side, either one-way or two-way encryption\uff1b</p> <p></p> </li> <li> <p>CA Certificate\uff1aa CA root certificate file must be uploaded when TLS encryption is enabled\uff1b</p> <ul> <li>You can copy the contents of the relevant certificate directly into the input box or click the Upload button to upload a file from your device.</li> <li> <p>Client Cerificate\uff1aa client certificate file must be uploaded when TLS bidirectional encryption is enabled\uff1b</p> </li> <li> <p>You can copy the contents of the relevant certificate directly into the input box or click the Upload button to upload a file from your device.</p> </li> <li> <p>Client Private Key\uff1aa client key file must be uploaded when TLS bidirectional encryption is enabled\uff1b</p> </li> <li> <p>You can copy the contents of the relevant certificate directly into the input box or click the Upload button to upload a file from your device.</p> </li> <li>Password of Key\uff1aoptional setting, password for encryption the client private key.</li> </ul> </li> </ul> <p>If you also need to set up more advanced MQTT options, you can click on Advance Settings.</p> <p></p> <ul> <li>Client ID\uff1athe client ID used by the gateway to connect to the server\uff1b</li> <li>QoS Level\uff1aQoS level of all topics, default is 0\uff1b</li> <li>Keep Alive Interval\uff1athe heartbeat interval when the gateway connects to the server, default is 60 seconds.</li> </ul>"},{"location":"thread_board_router/gl-s200/bluetooth/#http","title":"HTTP","text":"<p> - Report Url\uff1alink to data reporting; - Authentication Type\uff1aset the authentication method for http, currently choose between None or Basic authentication.</p> <pre><code>- If **Basic** is selected, the following configuration needs to be entered according to the server settings.\n\n    ![http-basic](https://static.gl-inet.com/docs/iot/en/ble_web_guide/http-basic.png)\n\n    - **Username**: the HTTP authentication username\n    - **Password**: the HTTP authentication password\n</code></pre>"},{"location":"thread_board_router/gl-s200/bluetooth/#bluetooth-report","title":"Bluetooth Report","text":"<p>On the Bluetooth report page, you can set the relevant parameters in it.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#base","title":"Base","text":"<ul> <li>Report Interval\uff1athe interval in seconds for the gateway to report data to the server;</li> <li>Data Format\uff1athe data format reported by the gateway to the server, currently only Json format is supported;</li> <li>Enable Broadcast Data Report\uff1aIf the option is enabled, each reported data will include complete broadcast packet data; otherwise, each reported data will only include the device MAC address and RSSI.</li> </ul>"},{"location":"thread_board_router/gl-s200/bluetooth/#bluetooth-settings-backuprestore","title":"Bluetooth Settings Backup/Restore","text":""},{"location":"thread_board_router/gl-s200/bluetooth/#backup","title":"Backup","text":"<p>You can export all Bluetooth-related settings on the page, including scan, connection, remote manage, report, data definition.</p> <p></p> <p>If you would like to export the SSL certificate associated with the server connection configured on the device, please tick the \"Include SSL certificate\" option.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#restore","title":"Restore","text":"<p>You can import a Bluetooth configuration that you have previously backed up or exported from another machine on the Bluetooth configuration restore page.</p>"},{"location":"thread_board_router/gl-s200/bluetooth/#_1","title":"Bluetooth","text":"<p>Still have questions? Visit our Community Forum.</p>"},{"location":"thread_board_router/gl-s200/hardware/","title":"Hardware","text":"<p>GL-S200 is a miniaturized Thread gateway supporting BLE protocol that runs on a highly customizable OpenWrt operating system and supports cloud device management. It has a versatile design for connecting to various smart home devices, or mass device connectivity for smart buildings.</p> <p></p>"},{"location":"thread_board_router/gl-s200/hardware/#specification","title":"Specification","text":"<p>GL-s200 specification</p>"},{"location":"thread_board_router/gl-s200/hardware/#gl-s200-pcb-pinout","title":"GL-S200 PCB Pinout","text":""},{"location":"thread_board_router/gl-s200/hardware/#gl-thread-dev-board-pinout","title":"GL Thread Dev Board Pinout","text":""},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/","title":"GL.iNet OpenThread Border Router Codelabs","text":""},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#application-scenario","title":"Application Scenario","text":"<p>There are two applocation scenarioes, Direct Connection and Indirect Connection.</p> <ul> <li>Scenario 1, Direct Connection, PC/mobile phone connects OTBR directly.</li> <li>Scenario 2, Indirect Connection, PC/mobile phone and OTBR connect to the same upstream WiFi AP.</li> </ul> <p>GL.iNet OTBR is factory-configured with Scenario 1 by default. Users need to configure the upstream interface for the backbone router according to their own application scenarios on the web Admin Panel -&gt; THREAD MESH -&gt; Advanced -&gt; Backbone Routers.</p>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#scenario-1-direct-connection","title":"Scenario 1, Direct Connection","text":"<p>PC/mobile phone connects OTBR directly.</p> <p></p>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#scenario-2-indirect-connection","title":"Scenario 2, Indirect Connection","text":"<p>PC/mobile phone and OTBR connect to the same upstream WiFi AP.</p> <p></p>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#bi-directional-ipv6-connectivity-and-dns-based-service-discovery","title":"Bi-directional IPv6 connectivity and DNS-based service discovery","text":"<p>This experiment uses the following topology diagram</p> <ul> <li>Ubuntu 20.04.4</li> <li>NRF52840 USB dongle\uff08ot-nrf52840 - 2023-02-15-d88076e\uff09</li> <li>ot-br-posix - 2022-11-08-d910392</li> </ul> <p></p>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-1-create-a-thread-network","title":"Step 1: Create a Thread network","text":"<pre><code>root@GL-S200:~# uci set otbr.otbr.enable=1\nroot@GL-S200:~# uci commit otbr\n\nroot@GL-S200:~# ot-ctl dataset init new\nDone\nroot@GL-S200:~# ot-ctl dataset commit active\nDone\nroot@GL-S200:~# ot-ctl dataset active\nActive Timestamp: 1\nChannel: 18\nChannel Mask: 0x07fff800\nExt PAN ID: a1fce8946f2f9b1d\nMesh Local Prefix: fd50:5ff6:fd1b:325b::/64\nNetwork Key: e67446d4e450ad76cd3ad5472530d410\nNetwork Name: OpenThread-ee97\nPAN ID: 0xee97\nPSKc: 42743e8b67c06353cd038520a0ab8b7f\nSecurity Policy: 672 onrc\nDone\nroot@GL-S200:~# ot-ctl ifconfig up\nDone\nroot@GL-S200:~# ot-ctl thread start\nDone\nroot@GL-S200:~# ot-ctl state\nleader\nDone\nroot@GL-S200:~# ot-ctl dataset active -x\n0e080000000000010000000300001235060004001fffe00208a1fce8946f2f9b1d0708fd505ff6fd1b325b0510e67446d4e450ad76cd3ad5472530d410030f4f70656e5468726561642d656539370102ee97041042743e8b67c06353cd038520a0ab8b7f0c0402a0f7f8\nDone\nroot@GL-S200:~# ot-ctl netdata show\nPrefixes:\nfd15:5b2d:647f:1::/64 paos low c400\nRoutes:\nfd15:5b2d:647f:2:0:0::/96 sn low c400\nfda1:fce8:946f:9b1d::/64 s med c400\nServices:\n44970 5d fd505ff6fd1b325b84ab8a51482f2df7d11f s c400\n44970 01 31000500000e10 s c400\nDone\nroot@GL-S200:~# ot-ctl ipaddr\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc11\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc38\nfd15:5b2d:647f:1:4e73:fe27:fcad:9eb4\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc10\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc00\nfd50:5ff6:fd1b:325b:0:ff:fe00:c400\nfd50:5ff6:fd1b:325b:84ab:8a51:482f:2df7\nfe80:0:0:0:3488:80b2:ca62:867d\nDone\n</code></pre> <p>Check the connectivity of OTBR on your phone/PC.</p> <pre><code>$ ping -6 -c1 fd15:5b2d:647f:1:4e73:fe27:fcad:9eb4\nPING fd15:5b2d:647f:1:4e73:fe27:fcad:9eb4(fd15:5b2d:647f:1:4e73:fe27:fcad:9eb4) 56 data bytes\n64 bytes from fd15:5b2d:647f:1:4e73:fe27:fcad:9eb4: icmp_seq=1 ttl=64 time=0.996 ms\n\n--- fd15:5b2d:647f:1:4e73:fe27:fcad:9eb4 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 0.996/0.996/0.996/0.000 ms\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-2-configure-the-srp-client-terminal-device","title":"Step 2: Configure the SRP client terminal device","text":"<p>To be executed on NRF52840.</p> <pre><code>&gt; dataset set active 0e080000000000010000000300001235060004001fffe00208a1fce8946f2f9b1d0708fd505ff6fd1b325b0510e67446d4e450ad76cd3ad5472530d410030f4f70656e5468726561642d656539370102ee97041042743e8b67c06353cd038520a0ab8b7f0c0402a0f7f8\nDone\n&gt; ifconfig up\nDone\n&gt; thread start\nDone\n&gt; state\nchild\nDone\n&gt; netdata show\nPrefixes:\nfd15:5b2d:647f:1::/64 paos low fffe\nRoutes:\nfd15:5b2d:647f:2:0:0::/96 sn low fffe\nfda1:fce8:946f:9b1d::/64 s med fffe\nServices:\n44970 5d fd505ff6fd1b325b84ab8a51482f2df7d11f s fc10\n44970 01 31000500000e10 s fc11\nDone\n&gt; ipaddr\nfd15:5b2d:647f:1:75cd:be97:fd26:f3b9\nfd50:5ff6:fd1b:325b:0:ff:fe00:c401\nfd50:5ff6:fd1b:325b:27af:b1fc:9225:4134\nfe80:0:0:0:3873:7703:285d:38eb\nDone\n</code></pre> <p>Check the Thread Device connectivity on the mobile phone/PC.</p> <pre><code>$ ping -6 -c1 fd15:5b2d:647f:1:75cd:be97:fd26:f3b9\nPING fd15:5b2d:647f:1:75cd:be97:fd26:f3b9(fd15:5b2d:647f:1:75cd:be97:fd26:f3b9) 56 data bytes\n64 bytes from fd15:5b2d:647f:1:75cd:be97:fd26:f3b9: icmp_seq=1 ttl=63 time=41.1 ms\n\n--- fd15:5b2d:647f:1:75cd:be97:fd26:f3b9 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 41.148/41.148/41.148/0.000 ms\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-3-publish-srp-service-on-the-terminal-device","title":"Step 3: Publish SRP service on the terminal device","text":"<pre><code>&gt; srp client autostart enable\nDone\n&gt; srp client host name ot-host\nDone\n&gt; srp client host address fd15:5b2d:647f:1:75cd:be97:fd26:f3b9\nDone\n&gt; srp client service add ot-service _ipps._tcp 12345\nDone\n&gt; srp client service\ninstance:\"ot-service\", name:\"_ipps._tcp\", state:Registered, port:12345, priority:0, weight:0\nDone\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-4-discover-services-on-otbr","title":"Step 4: Discover services on OTBR","text":"<pre><code>root@GL-S200:~# ot-ctl srp server service\not-service._ipps._tcp.default.service.arpa.\n    deleted: false\n    subtypes: (null)\n    port: 12345\n    priority: 0\n    weight: 0\n    ttl: 7200\n    lease: 7200\n    key-lease: 1209600\n    TXT: []\n    host: ot-host.default.service.arpa.\n    addresses: [fd15:5b2d:647f:1:75cd:be97:fd26:f3b9]\nDone\nroot@GL-S200:~# dns-sd -B _ipps._tcp\nBrowsing for _ipps._tcp\nDATE: ---Wed 15 Mar 2023---\n 8:41:10.598  ...STARTING...\nTimestamp     A/R    Flags  if Domain               Service Type         Instance Name\n 8:41:10.600  Add        3   6 local.               _ipps._tcp.          ot-service\n 8:41:10.602  Add        2   7 local.               _ipps._tcp.          ot-service\n^C\nroot@GL-S200:~# dns-sd -L ot-service _ipps._tcp.\nLookup ot-service._ipps._tcp..local\nDATE: ---Wed 15 Mar 2023---\n 8:41:16.522  ...STARTING...\n 8:41:16.666  ot-service._ipps._tcp.local. can be reached at ot-host.local.:12345 (interface 6) Flags: 1\n 8:41:16.668  ot-service._ipps._tcp.local. can be reached at ot-host.local.:12345 (interface 7)\n^C\nroot@GL-S200:~# dns-sd -G -v6 ot-host.local.\nDATE: ---Wed 15 Mar 2023---\n 8:41:21.478  ...STARTING...\nTimestamp     A/R    Flags if Hostname                               Address                                      TTL\n 8:41:21.653  Add        3  6 ot-host.local.                         FD15:5B2D:647F:0001:75CD:BE97:FD26:F3B9%&lt;0&gt;  120\n 8:41:21.656  Add        2  7 ot-host.local.                         FD15:5B2D:647F:0001:75CD:BE97:FD26:F3B9%&lt;0&gt;  120\n^C\nroot@GL-S200:~# ping -6 -c1 fd15:5b2d:647f:1:75cd:be97:fd26:f3b9\nPING fd15:5b2d:647f:1:75cd:be97:fd26:f3b9 (fd15:5b2d:647f:1:75cd:be97:fd26:f3b9): 56 data bytes\n64 bytes from fd15:5b2d:647f:1:75cd:be97:fd26:f3b9: seq=0 ttl=64 time=33.375 ms\n\n--- fd15:5b2d:647f:1:75cd:be97:fd26:f3b9 ping statistics ---\n1 packets transmitted, 1 packets received, 0% packet loss\nround-trip min/avg/max = 33.375/33.375/33.375 ms\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-5-discover-services-on-pc","title":"Step 5: Discover services on PC","text":"<p>Use <code>dns-sd</code>on macOS system.</p> <pre><code>$ dns-sd -B _ipps._tcp\nBrowsing for _ipps._tcp\nDATE: ---Wed 15 Mar 2023---\n16:42:03.955  ...STARTING...\nTimestamp     A/R    Flags  if Domain               Service Type         Instance Name\n16:42:03.958  Add        2   2 local.               _ipps._tcp.          ot-service\n\n$ dns-sd -L ot-service _ipps._tcp.\nLookup ot-service._ipps._tcp..local\nDATE: ---Wed 15 Mar 2023---\n16:42:13.192  ...STARTING...\n16:42:13.193  ot-service._ipps._tcp.local. can be reached at ot-host.local.:12345 (interface 2)\n\n$ dns-sd -G -v6 ot-host.local.\nDATE: ---Wed 15 Mar 2023---\n16:42:18.168  ...STARTING...\nTimestamp     A/R    Flags if Hostname                               Address                                      TTL\n16:42:18.169  Add 40000002  2 ot-host.local.                         FD15:5B2D:647F:0001:75CD:BE97:FD26:F3B9%&lt;0&gt;  120\n</code></pre> <p>Use <code>avahi-browser</code> on Linux system.</p> <pre><code>$ avahi-browse -rt _ipps._tcp\n+  ens33 IPv6 ot-service                                    Secure Internet Printer local\n+  ens33 IPv4 ot-service                                    Secure Internet Printer local\n=  ens33 IPv6 ot-service                                    Secure Internet Printer local\n   hostname = [ot-host.local]\n   address = [fd15:5b2d:647f:1:75cd:be97:fd26:f3b9]\n   port = [12345]\n   txt = []\n=  ens33 IPv4 ot-service                                    Secure Internet Printer local\n   hostname = [ot-host.local]\n   address = [fd15:5b2d:647f:1:75cd:be97:fd26:f3b9]\n   port = [12345]\n   txt = []\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-6-ping-the-terminal-devices-local-domain-name-on-pc","title":"Step 6: Ping the terminal device's local domain name on PC","text":"<pre><code>$ ping -6 -c1 ot-host.local\nPING ot-host.local(fd15:5b2d:647f:1:75cd:be97:fd26:f3b9 (fd15:5b2d:647f:1:75cd:be97:fd26:f3b9)) 56 data bytes\n64 bytes from fd15:5b2d:647f:1:75cd:be97:fd26:f3b9 (fd15:5b2d:647f:1:75cd:be97:fd26:f3b9): icmp_seq=1 ttl=63 time=30.4 ms\n\n--- ot-host.local ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 30.360/30.360/30.360/0.000 ms\n</code></pre> <p>If the ping command returns <code>Name or service not known</code> , modify <code>/etc/nsswitch.conf</code> as follows and try again. The domain name should be resolvable on both OTBR and PC.</p> <pre><code>hosts:          files mdns4_minimal mdns6_minimal dns\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#providing-internet-access-via-nat64","title":"Providing Internet access via NAT64","text":"<p>Nat64 is enabled by default. After creating a Thread network and joining Thread devices to the network according to the instructions for the experiment on bi-directional IPv6 connectivity and DNS-based service discovery,</p> <ul> <li>Accessing Local Area Network.</li> </ul> <pre><code>&gt; ping 192.168.8.233\nPinging synthesized IPv6 address: fdf8:7dfb:4d50:2:0:0:c0a8:8e9\n16 bytes from fdf8:7dfb:4d50:2:0:0:c0a8:8e9: icmp_seq=3 hlim=63 time=15ms\n1 packets transmitted, 1 packets received. Packet loss = 0.0%. Round-trip min/avg/max = 15/15.0/15 ms.\nDone\n</code></pre> <ul> <li>Accessing the Internet.</li> </ul> <pre><code>&gt; ping 8.8.8.8\nPinging synthesized IPv6 address: fdf8:7dfb:4d50:2:0:0:808:808\n16 bytes from fdf8:7dfb:4d50:2:0:0:808:808: icmp_seq=4 hlim=47 time=75ms\n1 packets transmitted, 1 packets received. Packet loss = 0.0%. Round-trip min/avg/max = 75/75.0/75 ms.\nDone\n&gt; dns resolve4 google.com 8.8.8.8\nSynthesized IPv6 DNS server address: fdf8:7dfb:4d50:2:0:0:808:808\nDNS response for google.com. - fdf8:7dfb:4d50:2:0:0:8efb:dc4e TTL:127\nDone\n&gt; ping fdf8:7dfb:4d50:2:0:0:8efb:dc4e\n16 bytes from fdf8:7dfb:4d50:2:0:0:8efb:dc4e: icmp_seq=5 hlim=106 time=96ms\n1 packets transmitted, 1 packets received. Packet loss = 0.0%. Round-trip min/avg/max = 96/96.0/96 ms.\nDone\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#matter-over-thread","title":"Matter Over Thread","text":"<p>The topology of this experiment is shown in the following diagram, where the Matter Controller runs on a PC, and the Matter Light and Matter Light Switch both use the Silicon Labs EFR32MG24 Breakout Board REV 1.1 as the Matter device.</p> <p></p>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-1-create-a-thread-network_1","title":"Step 1: Create a Thread network.","text":"<pre><code>root@GL-S200:~# ot-ctl dataset init new\nDone\nroot@GL-S200:~# ot-ctl dataset commit active\nDone\nroot@GL-S200:~# ot-ctl dataset active\nActive Timestamp: 1\nChannel: 18\nChannel Mask: 0x07fff800\nExt PAN ID: a1fce8946f2f9b1d\nMesh Local Prefix: fd50:5ff6:fd1b:325b::/64\nNetwork Key: e67446d4e450ad76cd3ad5472530d410\nNetwork Name: OpenThread-ee97\nPAN ID: 0xee97\nPSKc: 42743e8b67c06353cd038520a0ab8b7f\nSecurity Policy: 672 onrc\nDone\nroot@GL-S200:~# ot-ctl ifconfig up\nDone\nroot@GL-S200:~# ot-ctl thread start\nDone\nroot@GL-S200:~# ot-ctl state\nleader\nDone\nroot@GL-S200:~# ot-ctl dataset active -x\n0e080000000000010000000300001235060004001fffe00208a1fce8946f2f9b1d0708fd505ff6fd1b325b0510e67446d4e450ad76cd3ad5472530d410030f4f70656e5468726561642d656539370102ee97041042743e8b67c06353cd038520a0ab8b7f0c0402a0f7f8\nDone\nroot@GL-S200:~# ot-ctl netdata show\nPrefixes:\nfd15:5b2d:647f:1::/64 paos low c400\nRoutes:\nfd15:5b2d:647f:2:0:0::/96 sn low c400\nfda1:fce8:946f:9b1d::/64 s med c400\nServices:\n44970 5d fd505ff6fd1b325b84ab8a51482f2df7d11f s c400\n44970 01 31000500000e10 s c400\nDone\nroot@GL-S200:~# ot-ctl ipaddr\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc11\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc38\nfd15:5b2d:647f:1:4e73:fe27:fcad:9eb4\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc10\nfd50:5ff6:fd1b:325b:0:ff:fe00:fc00\nfd50:5ff6:fd1b:325b:0:ff:fe00:c400\nfd50:5ff6:fd1b:325b:84ab:8a51:482f:2df7\nfe80:0:0:0:3488:80b2:ca62:867d\nDone\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-2-commissioning","title":"Step 2: Commissioning","text":"<p>Command format:</p> <pre><code>chip-tool pairing ble-thread ${NODE_ID} hex:${DATASET} ${PIN_CODE} ${DISCRIMINATOR}\n</code></pre> <ul> <li><code>${NODE_ID}</code>\uff1aAssign an ID to the commissioned device. It can be any non-zero value that has not been used after RCP initialization, and it is used by the chip-tool to operate on this Matter device.</li> <li><code>${DATASET}</code>\uff1a Obtained by running the command <code>ot-ctl dataset active -x</code></li> <li><code>${PIN_CODE}</code>\uff1aIf the pairing code has not been configured in the flash memory, use the default pairing code.</li> <li><code>${DISCRIMINATOR}</code>\uff1aIf pairing code is not configured in flash yet, use the default pairing code.</li> </ul> <p>When you long-press the BT0 button on the Matter Light for more than 6 seconds, it enters commissioning mode.</p> <pre><code>sudo ./out/chip-tool/chip-tool pairing ble-thread 1001 hex:0e080000000000010000000300001235060004001fffe00208a1fce8946f2f9b1d0708fd505ff6fd1b325b0510e67446d4e450ad76cd3ad5472530d410030f4f70656e5468726561642d656539370102ee97041042743e8b67c06353cd038520a0ab8b7f0c0402a0f7f8 20202021 3840\n</code></pre> <p>Press and hold the BT0 button of the Matter Light Switch for more than 6 seconds to enter commissioning mode.</p> <pre><code>sudo ./out/chip-tool/chip-tool pairing ble-thread 1002 hex:0e080000000000010000000300001235060004001fffe00208a1fce8946f2f9b1d0708fd505ff6fd1b325b0510e67446d4e450ad76cd3ad5472530d410030f4f70656e5468726561642d656539370102ee97041042743e8b67c06353cd038520a0ab8b7f0c0402a0f7f8 20202021 3840\n</code></pre> <p>If there is no error, the output of the command should look like the following:</p> <pre><code>[1678871136.912386][3259774:3259774] CHIP:DL: Inet Layer shutdown\n[1678871136.912404][3259774:3259774] CHIP:DL: BLE shutdown\n[1678871136.913326][3259774:3259774] CHIP:DL: System Layer shutdown\n</code></pre> <p>Discovery Matter device from PC,</p> <pre><code>$ avahi-browse -rt _matter._tcp\n+ enp0s31f6 IPv6 65D508548AF4E6CD-00000000000003EA             _matter._tcp         local\n+ enp0s31f6 IPv6 65D508548AF4E6CD-00000000000003E9             _matter._tcp         local\n+ enp0s31f6 IPv4 65D508548AF4E6CD-00000000000003EA             _matter._tcp         local\n+ enp0s31f6 IPv4 65D508548AF4E6CD-00000000000003E9             _matter._tcp         local\n= enp0s31f6 IPv6 65D508548AF4E6CD-00000000000003EA             _matter._tcp         local\n   hostname = [DEE6259B059B0BB6.local]\n   address = [fd15:5b2d:647f:1:25b3:9abe:d387:e9aa]\n   port = [5540]\n   txt = [\"T=0\" \"SAI=2000\" \"SII=5000\"]\n= enp0s31f6 IPv6 65D508548AF4E6CD-00000000000003E9             _matter._tcp         local\n   hostname = [3EF840EF1D01024D.local]\n   address = [fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc]\n   port = [5540]\n   txt = [\"T=0\" \"SAI=2000\" \"SII=5000\"]\n= enp0s31f6 IPv4 65D508548AF4E6CD-00000000000003EA             _matter._tcp         local\n   hostname = [DEE6259B059B0BB6.local]\n   address = [fd15:5b2d:647f:1:25b3:9abe:d387:e9aa]\n   port = [5540]\n   txt = [\"T=0\" \"SAI=2000\" \"SII=5000\"]\n= enp0s31f6 IPv4 65D508548AF4E6CD-00000000000003E9             _matter._tcp         local\n   hostname = [3EF840EF1D01024D.local]\n   address = [fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc]\n   port = [5540]\n   txt = [\"T=0\" \"SAI=2000\" \"SII=5000\"]\n\n$ avahi-browse -rt _matterc._udp\n+ enp0s31f6 IPv6 18D347F0BB27870E                              _matterc._udp        local\n+ enp0s31f6 IPv4 18D347F0BB27870E                              _matterc._udp        local\n= enp0s31f6 IPv6 18D347F0BB27870E                              _matterc._udp        local\n   hostname = [DEE6259B059B0BB6.local]\n   address = [fd15:5b2d:647f:1:25b3:9abe:d387:e9aa]\n   port = [5540]\n   txt = [\"PI=\" \"PH=36\" \"CM=0\" \"D=3840\" \"T=0\" \"SAI=2000\" \"SII=5000\" \"VP=65521+32772\"]\n= enp0s31f6 IPv4 18D347F0BB27870E                              _matterc._udp        local\n   hostname = [DEE6259B059B0BB6.local]\n   address = [fd15:5b2d:647f:1:25b3:9abe:d387:e9aa]\n   port = [5540]\n   txt = [\"PI=\" \"PH=36\" \"CM=0\" \"D=3840\" \"T=0\" \"SAI=2000\" \"SII=5000\" \"VP=65521+32772\"]\n\n$ ping -6 -c1 3EF840EF1D01024D.local\nPING 3EF840EF1D01024D.local(fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc (fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc)) 56 data bytes\n64 bytes from fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc (fd15:5b2d:647f:1:b5be:90a6:6fde:a8dc): icmp_seq=1 ttl=63 time=82.9 ms\n\n--- 3EF840EF1D01024D.local ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 82.865/82.865/82.865/0.000 ms\n\n$ ping -6 -c1 DEE6259B059B0BB6.local\nPING DEE6259B059B0BB6.local(fd15:5b2d:647f:1:25b3:9abe:d387:e9aa (fd15:5b2d:647f:1:25b3:9abe:d387:e9aa)) 56 data bytes\n64 bytes from fd15:5b2d:647f:1:25b3:9abe:d387:e9aa (fd15:5b2d:647f:1:25b3:9abe:d387:e9aa): icmp_seq=1 ttl=63 time=69.3 ms\n\n--- DEE6259B059B0BB6.local ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 69.331/69.331/69.331/0.000 ms\n</code></pre>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-3-control-the-light","title":"Step 3: Control the Light","text":"<ol> <li> <p>Toggle the Light</p> <p>Command Format : <code>chip-tool onoff toggle ${NODE_ID} 1</code></p> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool onoff toggle 1001 1\n</code></pre> </li> <li> <p>Turn On the Light</p> <p>Command Format : <code>chip-tool onoff on ${NODE_ID} 1</code></p> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool onoff on 1001 1\n</code></pre> </li> <li> <p>Turn Off the Light</p> <p>Command Format : <code>chip-tool onoff off ${NODE_ID} 1</code></p> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool onoff off 1001 1\n</code></pre> </li> <li> <p>Read the State of the Light</p> <p>Command Format : <code>chip-tool onoff read on-off ${NODE_ID} 1</code></p> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool onoff read on-off 1001 1\n</code></pre> </li> </ol>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#step-4-use-the-matter-switch-to-control-the-light","title":"Step 4: Use the Matter Switch to Control the Light","text":"<ol> <li> <p>Set the ACL of the Light to Allow the Switch to Control It</p> <p>For ACL parameter explanation, please refer to Matter Core Specification - 9.10.5.3. ACL Attribute</p> <p>Command Format :</p> <pre><code>sudo ./out/chip-tool/chip-tool accesscontrol write acl '[{\"fabricIndex\":1, \"privilege\":5, \"authMode\":2, \"subjects\":[112233, ${switch_node_id}], \"targets\":null}]' ${lighting_node_id} 0\n</code></pre> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool accesscontrol write acl '[{\"fabricIndex\":1, \"privilege\":5, \"authMode\":2, \"subjects\":[112233, 1002], \"targets\":null}]' 1001 0\n</code></pre> </li> <li> <p>Bind the Switch to the Light</p> <p>Command Format :</p> <pre><code>sudo ./out/chip-tool/chip-tool binding write binding '[{\"fabricIndex\":1, \"node\":${lighting_node_id}, \"endpoint\":1, \"cluster\":6}]' ${switch_node_id} 1\n</code></pre> <p>Example\uff1a</p> <pre><code>sudo ./out/chip-tool/chip-tool binding write binding '[{\"fabricIndex\":1, \"node\":1001, \"endpoint\":1, \"cluster\":6}]' 1002 1\n</code></pre> <p>After completing the above steps, you can use Matter Switch BTN1 to control the on/off state of Matter Light.</p> </li> </ol>"},{"location":"thread_board_router/gl-s200/openthread_border_router_codelabs/#connect-to-home-assistant","title":"Connect to Home Assistant","text":"<p>Test environment</p> <ul> <li>Raspberrypi 4B, Debian GNU/Linux 11 (bullseye)</li> <li>GL-S200</li> </ul> <p>Refer to the documentation https://www.home-assistant.io/installation/raspberrypi to install Home Assistant on Raspberrypi.</p> <p>The GL-S200 needs to upgrade snapshot firmware.</p> <p>Noted: Due to Thread certification reasons, we will not release this feature in stable firmware in the short term.</p> <p>Open the Home Assistant admin panel, Settings -&gt; Devices&amp;Services -&gt; Thread -&gt; CONFIGURE -&gt; ADD AN OPENTHREAD BORDER ROUTER, input the URL <code>http://&lt;ip&gt;:8081</code> and submit. As shown in the following figure,  <code>192.168.90.182</code> is the IP assigned by the superior router. If your Home Assistant is connected directly to GL OTBR via WiFi/Ethernet, you can use <code>192.168.8.1</code>.</p> <p></p> <p>Now, The GL.iNet OTBR is successfully added to the Preferred network.</p> <p></p> <p>Still have questions? Visit our Community Forum.</p>"},{"location":"thread_board_router/gl-s200/software/","title":"Software","text":"<p>Coming soon</p>"},{"location":"thread_board_router/gl-s200/thread_mesh/","title":"Thread Mesh","text":""},{"location":"thread_board_router/gl-s200/thread_mesh/#thread-network","title":"Thread Network","text":"<p>You can configure and manage Thread Network settings on the Thread Network page.</p> <p></p> <ul> <li>EUI-64\uff1aUnique device identifier, hexadecimal number of 8 bytes in length.</li> <li>Ext Mac\uff1aThe device extension address, a unique identifier in the Thread network, is a hexadecimal number of 8 bytes in length. The extended address is randomly generated and will be re-randomized when the system is restored to factory settings.</li> <li>Thread Version\uff1aCurrent thread protocol version.</li> <li>Tx Power\uff1aTransmit power, 0~20dBm, default is 20dBm.</li> <li>Network Name\uff1aThread network name, 1 to 16 characters long, used to generate PSKc (Pre-Shared Key for the Commissioner), default format  - &lt;3 characters after MAC address&gt;. <li>PAN ID\uff1aIEEE 802.15.4 MAC layer unique identifier, default value is 2 bytes after the MAC address in hexadecimal format.</li> <li>Extended PAN ID\uff1aThread network extension PAN ID for PSKc generation.</li> <li>Network Key\uff1aThread network key, a hexadecimal number of 16 bytes in length.</li> <li>Channel\uff1aThread network channel, 11~26, default value is 26.</li> <li>Commissioner Credential\uff1aUser-defined string, UTF-8 encoded characters from 6 to 255 in length, used to generate PSKc, default value is goodlife.</li> <p>Network Name/ PAN ID/ Extended PAN ID/ Network Key is generated based on the MAC address of the device.</p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#create-a-new-network","title":"Create a new network","text":"<p>You can create a new network directly by using the default configuration and clicking Enable. You can then see that the status of the S200 has changed from Detached to Leader, which means that a new network has been created.</p> <p>Note: If you have the same network settings as an existing Thread network in your current environment, then the S200 will automatically join that network.</p> <p></p> <p>If you want to set some parameters manually, you can configure them by clicking on the Manual Setup.</p> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#join-an-existing-network","title":"Join an existing network","text":"<p>We support the following 4 ways to add the S200 to an existing network.</p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#join-the-network-by-using-network-key","title":"Join the network by using Network Key","text":"<p>Click on the Join Network and the GL-S200 will scan the surrounding available Thread networks.</p> <p></p> <p>Select the Thread network you want to join in the pop-up window, enter its Network Key and apply it.</p> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#join-the-network-by-using-the-commissioner","title":"Join the network by using the Commissioner","text":"<ol> <li> <p>Using another GL.iNET S200 as the Commissioner (please refer to the Thread Commissioning page guide), enter the Joiner EUI64 and Joiner Credential of the S200 to be connected to the network.</p> </li> <li> <p>Click on the  \"Join Network\" on the S200 to be connected to the network, select \"Join With Commissioner\" in the pop-up window, enter the Joiner Credential and apply it.</p> </li> <li> <p>A successful Join Network will automatically jump to display the status page.</p> <p></p> </li> </ol>"},{"location":"thread_board_router/gl-s200/thread_mesh/#networking-using-import-thread-network-configuration","title":"Networking using import Thread network configuration","text":"<p>To facilitate deployment, we can import the same Thread network configuration directly to the device so that devices with the same Thread network configuration are automatically networked after they are up. You can import and export by clicking on Import Setting/Export Setting in the top right hand corner of the Thread Network page.</p> <p></p> <p></p> <p>Note: You can only export when the Thread Network is up, or import when the Thread Network is down.</p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#join-the-network-by-using-external-commissioner","title":"Join the network by using External Commissioner","text":"<p>In the Thread network, the GL.iNET S200 acts as a border agent to support external commissioners, which can be a mobile phone or a PC.</p> <p></p> <ol> <li> <p>Download Commissioner App</p> <ul> <li> <p>OT Commissioner Android App</p> </li> <li> <p>Thread Group Android App</p> </li> </ul> </li> <li> <p>Open the app after connecting the GL-S200 via WiFi.</p> </li> <li> <p>Select one of the AVALABLE BORDER ROUTERS and click on it and enter the Commissioner Credential.</p> <p></p> </li> <li> <p>If step 3 is entered correctly, you can scan the QR code on the GL-S200 Join With Commissioner page and click Apply on the GL-S200 page to start the process.</p> <p></p> </li> </ol>"},{"location":"thread_board_router/gl-s200/thread_mesh/#export-thread-network-settings","title":"Export thread network settings","text":"<p>You can copy the thread network dataset TLV data or download it in the file.</p> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#thread-commissioning","title":"Thread Commissioning","text":"<p>You can add new devices to the network on this page, and GL-S200 supports bulk imports.</p> <p></p> <ul> <li> <p>The Joiners card shows the list of Joiners to be added to the network</p> </li> <li> <p>The Commission Records card shows Joiner's network entry history.</p> <ul> <li> <p>For Joined/Timeout devices, click Action -&gt; Rejoin to re-enter the network without re-entering\uff1b</p> <p></p> </li> <li> <p>For all devices with Joined/Join Fail status, you can also click on Rejoin All to re-enter the network in bulk</p> <p></p> </li> </ul> </li> </ul>"},{"location":"thread_board_router/gl-s200/thread_mesh/#add-a-single-device","title":"Add a single device","text":"<ul> <li>Joiner EUI-64: Joiner's EUI-64 or type * to match all Joiners.</li> <li>Joiner Credential: The device credentials to be added must be a string containing all uppercase letters and numbers and must not contain the letters I, O, Q and Z, between 6 and 32 characters in length.</li> <li>Joiner Timeout: Joiner access timeout, during which a Joiner can access the network using valid credentials.</li> </ul>"},{"location":"thread_board_router/gl-s200/thread_mesh/#add-devices-in-batches","title":"Add devices in batches","text":"<p>If the device vendor has set different Joiner credentials for each Thread device, you will need this feature when deploying. Clicking Download template to download the template or export the saved Joiner list, fill in or add the Joiner EUI64 and Joiner Credential, then click Select to import.</p> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#thread-topologies","title":"Thread Topologies","text":"<p>The network topology data is obtained by sending multicast packets. The network topology data allows you to view information about each node such as IPv6 address, mode of operation, directly connected sub-nodes, etc.</p> <p></p> <p></p> <p>You can click on any device to view information about that device.</p> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#advanced","title":"Advanced","text":"<p>We have provided some advanced configurations related to Thread networking. Normally we do not recommend that users modify these parameters.</p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#srp-server","title":"SRP Server","text":"<p>SRP (Service Registration Protocol) is a service registration and discovery protocol. The IP of devices on an IP-based network is not usually fixed, so communication is not possible without determining the IP of the other end, and this SRP protocol allows automatic discovery of devices and services on the Thread network.</p> <p></p> <ul> <li>Host: SRP Server domain.</li> <li>Lease: The lifetime of the DNS-SD PTR, SRV, A, AAAA and TXT records.</li> <li>Key Lease: The lifetime of the KEY records.</li> </ul> <p></p>"},{"location":"thread_board_router/gl-s200/thread_mesh/#backbone-routers","title":"Backbone Routers","text":"<p>The Backbone Router (BBR) function is primarily used to receive multicast inbound/outbound requests. Refer to Thread Border Router - Thread 1.2 Multicast for experimentation.</p> <p></p> <ul> <li>Backbone Interface: Select the interface that bbr use.</li> </ul> <p>Still have questions? Visit our Community Forum.</p>"}]}