
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for GL.iNet Productions">
      
      
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.2">
    
    
      
        <title>Advanced Uboot - GL.iNet Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1118c9be.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
      

  


  

  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-108265653-5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advance-usage-of-uboot" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            
  <!-- Add your announcement here, including arbitrary HTML -->
  <div class="md-announce-text">Please note Docs 2.0 is depreciated. <a href="https://docs.gl-inet.com/latest/">Click here to go to 3.0</a></div>

          </div>
        </aside>
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="GL.iNet Docs" class="md-header__button md-logo" aria-label="GL.iNet Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GL.iNet Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Advanced Uboot
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/gl-inet/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gl-inet/docs2.x
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hardware/ar150/" class="md-tabs__link">
        Hardware
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../setup/first-time_setup/" class="md-tabs__link">
        Setup
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../serial/" class="md-tabs__link md-tabs__link--active">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../app/ssh/" class="md-tabs__link">
        Application
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../video/product_intro/" class="md-tabs__link">
        Video
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../troubleshooting/led/" class="md-tabs__link">
        Troubleshooting
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../domino/" class="md-tabs__link">
        Domino Kit
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GL.iNet Docs" class="md-nav__button md-logo" aria-label="GL.iNet Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    GL.iNet Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/gl-inet/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    gl-inet/docs2.x
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Home
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../service/" class="md-nav__link">
        Services
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Hardware
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Hardware" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ar150/" class="md-nav__link">
        GL-AR150 Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ar300m/" class="md-nav__link">
        GL-AR300M Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/mt300a/" class="md-nav__link">
        GL-MT300A
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/mt300n/" class="md-nav__link">
        GL-MT300N
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/mt300n-v2/" class="md-nav__link">
        GL-MT300N-V2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ar750/" class="md-nav__link">
        GL-AR750 Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/mifi/" class="md-nav__link">
        GL-MiFi Series
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/usb150/" class="md-nav__link">
        GL-USB150 (Microuter)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/b1300/" class="md-nav__link">
        GL-B1300
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/6416/" class="md-nav__link">
        GL.iNet6416
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ar300/" class="md-nav__link">
        GL-AR300
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/first-time_setup/" class="md-nav__link">
        First-time Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/internet_setting/" class="md-nav__link">
        Internet Settings
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/mac_clone/" class="md-nav__link">
        MAC Clone
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/dns/" class="md-nav__link">
        DNS Setting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/repeater_manager/" class="md-nav__link">
        Repeater Manager
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/lan_ip/" class="md-nav__link">
        LAN IP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/wifi_setting/" class="md-nav__link">
        Wi-Fi Settings (AP)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/firmware/" class="md-nav__link">
        Firmware Upgrading
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/modem_manager/" class="md-nav__link">
        Momdem Manager
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/rtc_setting/" class="md-nav__link">
        RTC Setting
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../serial/" class="md-nav__link">
        UART Serial
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Advanced Uboot
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Advanced Uboot
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-uboot" class="md-nav__link">
    About uboot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uboot-console" class="md-nav__link">
    Uboot console
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-tftp-server" class="md-nav__link">
    Setting up tftp server
  </a>
  
    <nav class="md-nav" aria-label="Setting up tftp server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu-linux" class="md-nav__link">
    Ubuntu Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-uboot" class="md-nav__link">
    Compiling uboot
  </a>
  
    <nav class="md-nav" aria-label="Compiling uboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gl-ar150-glinet6416-gl-ar300-gl-ar300m" class="md-nav__link">
    GL-AR150, GL.iNet6416, GL-AR300, GL-AR300M
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gl-ar150-uboot-modify-as-iot-devices" class="md-nav__link">
    GL-AR150 uboot modify as IoT devices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mt300a-mt300n-mt750" class="md-nav__link">
    MT300A, MT300N, MT750
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-uboot" class="md-nav__link">
    Using uboot
  </a>
  
    <nav class="md-nav" aria-label="Using uboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-uboot-command" class="md-nav__link">
    basic uboot command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predefined-script" class="md-nav__link">
    predefined script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uboot-web-ui" class="md-nav__link">
    Uboot Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ar300m-specific" class="md-nav__link">
    AR300M Specific
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/" class="md-nav__link">
        Domino Kit
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Application
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Application" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Application
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/ssh/" class="md-nav__link">
        SSH to the router
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/openvpn/" class="md-nav__link">
        OpenVPN Client
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/tor/" class="md-nav__link">
        Tor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/tether/" class="md-nav__link">
        EasyTether
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/ss/" class="md-nav__link">
        Shadowsocks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app/wireguard/" class="md-nav__link">
        WireGuard
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Video
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Video" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Video
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../video/product_intro/" class="md-nav__link">
        Product Intro
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../video/tutor/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../video/review/" class="md-nav__link">
        Customer Review
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Troubleshooting
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Troubleshooting" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Troubleshooting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/led/" class="md-nav__link">
        LED Indicator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/reset/" class="md-nav__link">
        Repair or Reset
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/debrick/" class="md-nav__link">
        Debrick via Uboot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/stop_supporting/" class="md-nav__link">
        Stop Supporting
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Domino Kit
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Domino Kit" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Domino Kit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/hardware/core/" class="md-nav__link">
        Domore Core
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/" class="md-nav__link">
        Domino Pi
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/pi/" class="md-nav__link">
        Domino Pi Baseboard
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/single_eth/" class="md-nav__link">
        Domino Pi - Single Eth board
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/dual_eth/" class="md-nav__link">
        Domino Pi - Due Eth board
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/single_usb/" class="md-nav__link">
        Domino Pi - Signle USB board
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/usb_combo/" class="md-nav__link">
        Domino Pi - 3xUSB+MicroSD combo
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/i2s/" class="md-nav__link">
        Domino Pi - I2S board
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/spi_jtag/" class="md-nav__link">
        Domino Pi - SPI/JTAG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/led/" class="md-nav__link">
        Domino Pi - LED
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/mini/" class="md-nav__link">
        Domino Qi Mini
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/base/" class="md-nav__link">
        Domino Qi baseboard
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/using/" class="md-nav__link">
        Pi - Using the firmware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/compile/" class="md-nav__link">
        Pi - Compile firmware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/flashing/" class="md-nav__link">
        Pi - Flashing and debricking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/audio/" class="md-nav__link">
        Pi - Playing Music
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/serial/" class="md-nav__link">
        Pi - Working with Serial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/pi/spi/" class="md-nav__link">
        Pi - Debricking using SPI/JTAG board
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/" class="md-nav__link">
        Qi - Getting Started
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/arduino-yun/" class="md-nav__link">
        Qi - Using Arduino or Linino Firmware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/nodejs/" class="md-nav__link">
        Qi - Using NodeJS and LininoIO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../domino/qi/serial/" class="md-nav__link">
        Qi - Using Serial
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-uboot" class="md-nav__link">
    About uboot
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uboot-console" class="md-nav__link">
    Uboot console
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-tftp-server" class="md-nav__link">
    Setting up tftp server
  </a>
  
    <nav class="md-nav" aria-label="Setting up tftp server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ubuntu-linux" class="md-nav__link">
    Ubuntu Linux
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-uboot" class="md-nav__link">
    Compiling uboot
  </a>
  
    <nav class="md-nav" aria-label="Compiling uboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gl-ar150-glinet6416-gl-ar300-gl-ar300m" class="md-nav__link">
    GL-AR150, GL.iNet6416, GL-AR300, GL-AR300M
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gl-ar150-uboot-modify-as-iot-devices" class="md-nav__link">
    GL-AR150 uboot modify as IoT devices
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mt300a-mt300n-mt750" class="md-nav__link">
    MT300A, MT300N, MT750
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-uboot" class="md-nav__link">
    Using uboot
  </a>
  
    <nav class="md-nav" aria-label="Using uboot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-uboot-command" class="md-nav__link">
    basic uboot command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#predefined-script" class="md-nav__link">
    predefined script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uboot-web-ui" class="md-nav__link">
    Uboot Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ar300m-specific" class="md-nav__link">
    AR300M Specific
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="advance-usage-of-uboot">Advance Usage of uboot</h1>
<p>Familiarity with uboot is a skill that you should master in order to play with the routers.</p>
<h2 id="about-uboot">About uboot</h2>
<p>Uboot (universial bootloader) is the bootloader we used on our boards and routers to start OpenWrt Linux. The bootloader heavily depends on the hardware so almost every device requires a different bootloader.</p>
<p>To use the bootloader, you have to <a href="/dev/serial/">connect a UART serial connector</a> to your device.</p>
<p>Taking our Atheros 9331 boards for example, when powered up, uboot will output the following text:</p>
<pre><code>*********************************************
*   U-Boot 1.1.4  (Sep  9 2014, 09:20:16)   *
*********************************************

AP121 (AR9331) U-Boot for GL.iNet

DRAM:   64 MB DDR 16-bit
FLASH:  Winbond W25Q128 (16 MB)
CLOCKS: 400/400/200/33 MHz (CPU/RAM/AHB/SPI)

LED on during eth initialization...

Hit any key to stop autobooting:  0
</code></pre>
<p>Quickly press any key to stop booting.</p>
<h2 id="uboot-console">Uboot console</h2>
<p>Uboot is very useful to save your router. Here is some useful command in uboot.</p>
<p><code>printenv</code> prints out the environment variables</p>
<pre><code>uboot&gt; printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(ART)
bootcmd=bootm 0x9F020000
bootdelay=1
baudrate=115200
ipaddr=192.168.1.1
serverip=192.168.1.2
bootfile=&quot;firmware.bin&quot;
loadaddr=0x80800000
ncport=6666
uboot_addr=0x9F000000
uboot_name=uboot.bin
uboot_size=0x10000
uboot_upg=if ping $serverip; then tftp $loadaddr $uboot_name &amp;&amp; if itest.l $filesize == $uboot_size; then erase $uboot_addr +$filesize &amp;&amp; cp.b $loadaddr $uboot_addr $filesize &amp;&amp; echo OK!; else echo ERROR! Wrong file size!; fi; else ERROR! Server not reachable!; fi
firmware_addr=0x9F020000
firmware_name=firmware.bin
firmware_upg=if ping $serverip; then tftp $loadaddr $firmware_name &amp;&amp; erase $firmware_addr +$filesize &amp;&amp; cp.b $loadaddr $firmware_addr $filesize &amp;&amp; echo OK!; else ERROR! Server not reachable!; fi
stdin=serial
stdout=serial
stderr=serial
ethact=eth0

Environment size: 937 bytes

uboot&gt;
</code></pre>
<p><code>md</code> displays data in flash or memory. The following command displays the data in flash from beginning, which is the binary of uboot itself.</p>
<pre><code>uboot&gt; md 0x9f000000
9F000000: 100000FF 00000000 100000FD 00000000    ................
9F000010: 1000018E 00000000 1000018C 00000000    ................
9F000020: 1000018A 00000000 10000188 00000000    ................
9F000030: 10000186 00000000 10000184 00000000    ................
9F000040: 10000182 00000000 10000180 00000000    ................
9F000050: 1000017E 00000000 1000017C 00000000    ...~.......|....
9F000060: 1000017A 00000000 10000178 00000000    ...z.......x....
9F000070: 10000176 00000000 10000174 00000000    ...v.......t....
9F000080: 10000172 00000000 10000170 00000000    ...r.......p....
9F000090: 1000016E 00000000 1000016C 00000000    ...n.......l....
9F0000A0: 1000016A 00000000 10000168 00000000    ...j.......h....
9F0000B0: 10000166 00000000 10000164 00000000    ...f.......d....
9F0000C0: 10000162 00000000 10000160 00000000    ...b.......`....
9F0000D0: 1000015E 00000000 1000015C 00000000    ...^.......\....
9F0000E0: 1000015A 00000000 10000158 00000000    ...Z.......X....
9F0000F0: 10000156 00000000 10000154 00000000    ...V.......T....
</code></pre>
<h2 id="setting-up-tftp-server">Setting up tftp server</h2>
<h3 id="ubuntu-linux">Ubuntu Linux</h3>
<p>In Ubuntu, you can install tftp using apt</p>
<pre><code>sudo apt-get install tftpd-hpa
</code></pre>
<p>The configuration file is <code>/etc/default/tftpd-hpa</code>. Modify its content and change the TFTP_DIRECTORY to your folder which will contains your files.</p>
<pre><code class="language-vim">TFTP_USERNAME=&quot;TFTP&quot;
TFTP_DIRECTORY=&quot;/tftpboot&quot;
TFTP_ADDRESS=&quot;[::]:69&quot;
TFTP_OPTIONS=&quot;--secure&quot;
</code></pre>
<p>Sometime the service cannot be started because network is not available when it starts. Start the service manually.</p>
<pre><code>sudo service tftpd-hpa restart
</code></pre>
<h3 id="windows">Windows</h3>
<p>Download service edition of tftpd from http://tftpd32.jounin.net/tftpd32_download.html, then install it.</p>
<p><img alt="tftp install" src="https://static.gl-inet.com/docs/en/2.x/dev/src/tftpd-install.png" /> </p>
<p>Turn off windows firewall, which is the main reason causing tftpd failed to connect.</p>
<p><img alt="tftp install" src="https://static.gl-inet.com/docs/en/2.x/dev/src/firewall.png" /> </p>
<p>Run tftpd64_SE Admin, choose your tftpd root (in this example D:\tftp), choose the "Server interface" 192.168.1.2 When clients are connecting to this server, you can see them in the status window.</p>
<p><img alt="tftp install" src="https://static.gl-inet.com/docs/en/2.x/dev/src/tftpd-status.png" /> </p>
<h2 id="compiling-uboot">Compiling uboot</h2>
<p>Each device has a different uboot because it is hardware related.</p>
<h3 id="gl-ar150-glinet6416-gl-ar300-gl-ar300m">GL-AR150, GL.iNet6416, GL-AR300, GL-AR300M</h3>
<p>For these models you can use <a href="https://github.com/pepe2k/u-boot_mod">Pepe2k's</a> uboot, you can download the source from github.</p>
<pre><code>$ git clone https://github.com/pepe2k/u-boot_mod.git
$ cd u-boot_mod
</code></pre>
<p>To compile the source, you need to have a cross complier toolchain. I am using openwrt toolchain. Make modification to the <code>Makefile</code>.</p>
<pre><code class="language-cmake">export BUILD_TOPDIR=$(PWD)
export STAGING_DIR=$(BUILD_TOPDIR)/tmp

# **Replace the following line with your real path**
export TOOLPATH=$(BUILD_TOPDIR)/../openwrt/staging_dir/toolchain-mips_34kc_gcc-4.8-linaro_uClibc-0.9.33.2/

export PATH:=$(TOOLPATH)/bin:${PATH}

export MAKECMD=make --silent --no-print-directory ARCH=mips CROSS_COMPILE=mips-openwrt-linux-uclibc-

# boot delay (time to autostart boot command)
export CONFIG_BOOTDELAY=1
</code></pre>
<p>Now start to compile the source. For example, for GL.iNet 6416, you can use:</p>
<pre><code>make gl-inet

</code></pre>
<p>For GL-AR150, you can do this:</p>
<pre><code>make 8devices_carambola2
</code></pre>
<p>For GL-AR300 and GL-AR300M, we modified the code a lot so please consult us for details.</p>
<p>It should be very quick and finish in minutes. Then you will find <code>uboot_for_gl-inet.bin</code> in <code>bin/</code>.</p>
<h3 id="gl-ar150-uboot-modify-as-iot-devices">GL-AR150 uboot modify as IoT devices</h3>
<p>If you connect IoT addon to AR150's UART, which talks to AR150 using serial. When the IoT addon send some data during uboot boot, it may stop the booting process so you never have the router alive. You need to modify the uboot a little bit so that it can succesffuly boot. </p>
<p>Use this code from github <a href="https://github.com/domino-team/uboot-domino">https://github.com/domino-team/uboot-domino</a></p>
<p>In this uboot, you need to type <code>gl</code> quickly during uboot boot to enter uboot console.</p>
<h3 id="mt300a-mt300n-mt750">MT300A, MT300N, MT750</h3>
<p>MT series routers use a different uboot and different code. Consult us if you need.</p>
<h2 id="using-uboot">Using uboot</h2>
<p>You can use <code>printenv</code> to display the environment variables in uboot. here are some quick guide of how to use uboot.</p>
<p>First you need to set up tftp server as above and put your files in tftp root folder.</p>
<h3 id="basic-uboot-command">basic uboot command</h3>
<p><strong>Download file to router</strong> (AR150, Domino, 6416 as example)</p>
<pre><code>tftp 0x81000000 file.bin
</code></pre>
<p><strong>Erase some part of flash</strong></p>
<pre><code>erase 0x9f050000 +0x10000
</code></pre>
<p><strong>Write file to flash</strong></p>
<pre><code>cp.b 0x81000000 0x9f050000 0x10000
</code></pre>
<h3 id="predefined-script">predefined script</h3>
<p>Actually it is not easy to use basic uboot command to do everyting. It is quite risky. Fortunately we have some pre-defined scripts that simplifeis the work.</p>
<p>Plase do check using <code>printenv</code> to find out the correct filename that the script trying to download. 
For example, if you want to update uboot for AR150, the uboot file should be named as <code>uboot_for_gl-ar150.bin</code> and put in your tftp root folder.</p>
<p><strong>Replace uboot</strong></p>
<pre><code>run lu
</code></pre>
<p><strong>Update firmware</strong></p>
<pre><code>run lf
</code></pre>
<p><strong>Update mac address etc</strong></p>
<pre><code>run lc
</code></pre>
<p><strong>Erase uboot env variables</strong>
Be sure to use the right command for the right model
For AR150, Domino AR300, AR300M</p>
<pre><code>erase 0x9f040000 +0x10000
reset
</code></pre>
<p>For 6416</p>
<pre><code>erase 0x9f010000 +0x10000
reset
</code></pre>
<h3 id="uboot-web-ui">Uboot Web UI</h3>
<p>Uboot has a webUI so that you can save your device without entering uboot console.</p>
<p><img alt="Uboot Web UI" src="https://static.gl-inet.com/docs/en/2.x/dev/src/uboot_failsafe.png" /></p>
<p>Check <a href="/troubleshooting/debrick.md">this section</a>  for how to enter uboot web UI using the reset button.</p>
<p>If you are in uboot console, you can start the WebUI the following command. This only works for AR series, not MT series.</p>
<pre><code>httpd
</code></pre>
<h3 id="ar300m-specific">AR300M Specific</h3>
<p>AR300M uses dual flash so in uboot there are a lot of things to deal with dual flash. Please refer to <a href="/hardware/ar300m/">AR300M</a> for more details.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../serial/" class="md-footer__link md-footer__link--prev" aria-label="Previous: UART Serial" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              UART Serial
            </div>
          </div>
        </a>
      
      
        
        <a href="../../domino/" class="md-footer__link md-footer__link--next" aria-label="Next: Domino Kit" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Domino Kit
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 GL Technologies & Microuter Technologies
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.2b46852b.min.js"></script>
      
    
  </body>
</html>